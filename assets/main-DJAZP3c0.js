(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))f(u);new MutationObserver(u=>{for(const n of u)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function i(u){const n={};return u.integrity&&(n.integrity=u.integrity),u.referrerPolicy&&(n.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?n.credentials="include":u.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(u){if(u.ep)return;u.ep=!0;const n=i(u);fetch(u.href,n)}})();document.querySelector("#nav").innerHTML=`
    <div class = "main" style="display: flex; margin:10px auto; flex-direction: row; bottom:100px; justify-content: center;">
        <h2 class = "title" style="color:green">
        Messenger
        </h2>        
         </div>`;var ue,on=new Uint8Array(16);function ln(){if(!ue&&(ue=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(on)}const un=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function cn(t){return typeof t=="string"&&un.test(t)}var N=[];for(var We=0;We<256;++We)N.push((We+256).toString(16).substr(1));function pn(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(N[t[e+0]]+N[t[e+1]]+N[t[e+2]]+N[t[e+3]]+"-"+N[t[e+4]]+N[t[e+5]]+"-"+N[t[e+6]]+N[t[e+7]]+"-"+N[t[e+8]]+N[t[e+9]]+"-"+N[t[e+10]]+N[t[e+11]]+N[t[e+12]]+N[t[e+13]]+N[t[e+14]]+N[t[e+15]]).toLowerCase();if(!cn(i))throw TypeError("Stringified UUID is invalid");return i}function hn(t,e,i){t=t||{};var f=t.random||(t.rng||ln)();return f[6]=f[6]&15|64,f[8]=f[8]&63|128,pn(f)}class et{listeners={};on(e,i){this.listeners[e]===void 0&&(this.listeners[e]=[]),this.listeners[e].push(i)}off(e,i){if(this.listeners[e]===void 0)throw new Error(`Нет события: ${e}`);this.listeners[e]=this.listeners[e].filter(f=>f!==i)}emit(e,...i){if(this.listeners[e]===void 0)throw new Error(`Нет события: ${e}`);this.listeners[e].forEach(f=>{f(...i)})}}class O{static EVENTS={INIT:"init",FLOW_CDM:"flow:component-did-mount",FLOW_CDU:"flow:component-did-update",FLOW_RENDER:"flow:render"};id=hn(6);props;refs={};children;eventBus;_element=null;constructor(e={},i=new et){const{props:f,children:u}=this._getChildrenAndProps(e);this.children=u,this.props=this._makePropsProxy(f),this.eventBus=()=>i,this._registerEvents(i),i.emit(O.EVENTS.INIT)}_getChildrenAndProps(e){const i={},f={};return Object.entries(e).forEach(([u,n])=>{n instanceof O?f[u]=n:i[u]=n}),{props:i,children:f}}_addEvents(){const{events:e={}}=this.props;Object.keys(e).forEach(i=>{this._element?.addEventListener(i,e[i])})}_removeEvents(){const{events:e={}}=this.props;Object.keys(e).forEach(i=>{this._element?.removeEventListener(i,e[i])})}_registerEvents(e){e.on(O.EVENTS.INIT,this._init.bind(this)),e.on(O.EVENTS.FLOW_CDM,this._componentDidMount.bind(this)),e.on(O.EVENTS.FLOW_CDU,this._componentDidUpdate.bind(this)),e.on(O.EVENTS.FLOW_RENDER,this._render.bind(this))}_init(){this.init(),this.eventBus().emit(O.EVENTS.FLOW_RENDER)}init(){}_componentDidMount(){this.componentDidMount()}componentDidMount(){}dispatchComponentDidMount(){this.eventBus().emit(O.EVENTS.FLOW_CDM),Object.values(this.children).forEach(e=>e.dispatchComponentDidMount())}_componentDidUpdate(){this.componentDidUpdate()&&this.eventBus().emit(O.EVENTS.FLOW_RENDER)}componentDidUpdate(){return!0}setProps=e=>{e&&Object.assign(this.props,e)};getProps(e){return this.props[e]}get element(){return this._element}_render(){const{events:e={}}=this.props;Object.keys(e).length>0&&this._removeEvents();const f=this.render().firstElementChild;this._element&&this._element.replaceWith(f),this._element=f,this._addEvents()}compile(e,i){const f={...i,__refs:this.refs},u=e(f),n=document.createElement("template");return n.innerHTML=u,f.__children?.forEach(({embed:r})=>{r(n.content)}),n.content}render(){return new DocumentFragment}getContent(){return this.element}_makePropsProxy(e){return new Proxy(e,{get(i,f){const u=i[f];return typeof u=="function"?u.bind(i):u},set:(i,f,u)=>{const n={...i};return i[f]=u,this.eventBus().emit(O.EVENTS.FLOW_CDU,n,i),!0},deleteProperty(){throw new Error("Нет доступа")}})}show(){this.getContent().style.display="block"}hide(){this.getContent().style.display="none"}}function fn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ce={exports:{}},pe={exports:{}},z={},U={},rt;function H(){if(rt)return U;rt=1,U.__esModule=!0,U.extend=u,U.indexOf=a,U.escapeExpression=h,U.isEmpty=p,U.createFrame=d,U.blockParams=l,U.appendContextPath=o;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},e=/[&<>"'`=]/g,i=/[&<>"'`=]/;function f(s){return t[s]}function u(s){for(var m=1;m<arguments.length;m++)for(var g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&(s[g]=arguments[m][g]);return s}var n=Object.prototype.toString;U.toString=n;var r=function(m){return typeof m=="function"};r(/x/)&&(U.isFunction=r=function(s){return typeof s=="function"&&n.call(s)==="[object Function]"}),U.isFunction=r;var c=Array.isArray||function(s){return s&&typeof s=="object"?n.call(s)==="[object Array]":!1};U.isArray=c;function a(s,m){for(var g=0,_=s.length;g<_;g++)if(s[g]===m)return g;return-1}function h(s){if(typeof s!="string"){if(s&&s.toHTML)return s.toHTML();if(s==null)return"";if(!s)return s+"";s=""+s}return i.test(s)?s.replace(e,f):s}function p(s){return!s&&s!==0?!0:!!(c(s)&&s.length===0)}function d(s){var m=u({},s);return m._parent=s,m}function l(s,m){return s.path=m,s}function o(s,m){return(s?s+".":"")+m}return U}var he={exports:{}},st;function Z(){return st||(st=1,(function(t,e){e.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function f(u,n){var r=n&&n.loc,c=void 0,a=void 0,h=void 0,p=void 0;r&&(c=r.start.line,a=r.end.line,h=r.start.column,p=r.end.column,u+=" - "+c+":"+h);for(var d=Error.prototype.constructor.call(this,u),l=0;l<i.length;l++)this[i[l]]=d[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,f);try{r&&(this.lineNumber=c,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:h,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:p,enumerable:!0})):(this.column=h,this.endColumn=p))}catch{}}f.prototype=new Error,e.default=f,t.exports=e.default})(he,he.exports)),he.exports}var ne={},fe={exports:{}},it;function dn(){return it||(it=1,(function(t,e){e.__esModule=!0;var i=H();e.default=function(f){f.registerHelper("blockHelperMissing",function(u,n){var r=n.inverse,c=n.fn;if(u===!0)return c(this);if(u===!1||u==null)return r(this);if(i.isArray(u))return u.length>0?(n.ids&&(n.ids=[n.name]),f.helpers.each(u,n)):r(this);if(n.data&&n.ids){var a=i.createFrame(n.data);a.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:a}}return c(u,n)})},t.exports=e.default})(fe,fe.exports)),fe.exports}var de={exports:{}},at;function mn(){return at||(at=1,(function(t,e){e.__esModule=!0;function i(r){return r&&r.__esModule?r:{default:r}}var f=H(),u=Z(),n=i(u);e.default=function(r){r.registerHelper("each",function(c,a){if(!a)throw new n.default("Must pass iterator to #each");var h=a.fn,p=a.inverse,d=0,l="",o=void 0,s=void 0;a.data&&a.ids&&(s=f.appendContextPath(a.data.contextPath,a.ids[0])+"."),f.isFunction(c)&&(c=c.call(this)),a.data&&(o=f.createFrame(a.data));function m(v,b,C){o&&(o.key=v,o.index=b,o.first=b===0,o.last=!!C,s&&(o.contextPath=s+v)),l=l+h(c[v],{data:o,blockParams:f.blockParams([c[v],v],[s+v,null])})}if(c&&typeof c=="object")if(f.isArray(c))for(var g=c.length;d<g;d++)d in c&&m(d,d,d===c.length-1);else if(typeof Symbol=="function"&&c[Symbol.iterator]){for(var _=[],y=c[Symbol.iterator](),k=y.next();!k.done;k=y.next())_.push(k.value);c=_;for(var g=c.length;d<g;d++)m(d,d,d===c.length-1)}else(function(){var v=void 0;Object.keys(c).forEach(function(b){v!==void 0&&m(v,d-1),v=b,d++}),v!==void 0&&m(v,d-1,!0)})();return d===0&&(l=p(this)),l})},t.exports=e.default})(de,de.exports)),de.exports}var me={exports:{}},ot;function gn(){return ot||(ot=1,(function(t,e){e.__esModule=!0;function i(n){return n&&n.__esModule?n:{default:n}}var f=Z(),u=i(f);e.default=function(n){n.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new u.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default})(me,me.exports)),me.exports}var ge={exports:{}},lt;function vn(){return lt||(lt=1,(function(t,e){e.__esModule=!0;function i(r){return r&&r.__esModule?r:{default:r}}var f=H(),u=Z(),n=i(u);e.default=function(r){r.registerHelper("if",function(c,a){if(arguments.length!=2)throw new n.default("#if requires exactly one argument");return f.isFunction(c)&&(c=c.call(this)),!a.hash.includeZero&&!c||f.isEmpty(c)?a.inverse(this):a.fn(this)}),r.registerHelper("unless",function(c,a){if(arguments.length!=2)throw new n.default("#unless requires exactly one argument");return r.helpers.if.call(this,c,{fn:a.inverse,inverse:a.fn,hash:a.hash})})},t.exports=e.default})(ge,ge.exports)),ge.exports}var ve={exports:{}},ut;function _n(){return ut||(ut=1,(function(t,e){e.__esModule=!0,e.default=function(i){i.registerHelper("log",function(){for(var f=[void 0],u=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)f.push(arguments[n]);var r=1;u.hash.level!=null?r=u.hash.level:u.data&&u.data.level!=null&&(r=u.data.level),f[0]=r,i.log.apply(i,f)})},t.exports=e.default})(ve,ve.exports)),ve.exports}var _e={exports:{}},ct;function yn(){return ct||(ct=1,(function(t,e){e.__esModule=!0,e.default=function(i){i.registerHelper("lookup",function(f,u,n){return f&&n.lookupProperty(f,u)})},t.exports=e.default})(_e,_e.exports)),_e.exports}var ye={exports:{}},pt;function bn(){return pt||(pt=1,(function(t,e){e.__esModule=!0;function i(r){return r&&r.__esModule?r:{default:r}}var f=H(),u=Z(),n=i(u);e.default=function(r){r.registerHelper("with",function(c,a){if(arguments.length!=2)throw new n.default("#with requires exactly one argument");f.isFunction(c)&&(c=c.call(this));var h=a.fn;if(f.isEmpty(c))return a.inverse(this);var p=a.data;return a.data&&a.ids&&(p=f.createFrame(a.data),p.contextPath=f.appendContextPath(a.data.contextPath,a.ids[0])),h(c,{data:p,blockParams:f.blockParams([c],[p&&p.contextPath])})})},t.exports=e.default})(ye,ye.exports)),ye.exports}var ht;function zt(){if(ht)return ne;ht=1,ne.__esModule=!0,ne.registerDefaultHelpers=m,ne.moveHelperToHooks=g;function t(_){return _&&_.__esModule?_:{default:_}}var e=dn(),i=t(e),f=mn(),u=t(f),n=gn(),r=t(n),c=vn(),a=t(c),h=_n(),p=t(h),d=yn(),l=t(d),o=bn(),s=t(o);function m(_){i.default(_),u.default(_),r.default(_),a.default(_),p.default(_),l.default(_),s.default(_)}function g(_,y,k){_.helpers[y]&&(_.hooks[y]=_.helpers[y],k||delete _.helpers[y])}return ne}var be={},Ce={exports:{}},ft;function Cn(){return ft||(ft=1,(function(t,e){e.__esModule=!0;var i=H();e.default=function(f){f.registerDecorator("inline",function(u,n,r,c){var a=u;return n.partials||(n.partials={},a=function(h,p){var d=r.partials;r.partials=i.extend({},d,n.partials);var l=u(h,p);return r.partials=d,l}),n.partials[c.args[0]]=c.fn,a})},t.exports=e.default})(Ce,Ce.exports)),Ce.exports}var dt;function kn(){if(dt)return be;dt=1,be.__esModule=!0,be.registerDefaultDecorators=f;function t(u){return u&&u.__esModule?u:{default:u}}var e=Cn(),i=t(e);function f(u){i.default(u)}return be}var ke={exports:{}},mt;function Zt(){return mt||(mt=1,(function(t,e){e.__esModule=!0;var i=H(),f={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(n){if(typeof n=="string"){var r=i.indexOf(f.methodMap,n.toLowerCase());r>=0?n=r:n=parseInt(n,10)}return n},log:function(n){if(n=f.lookupLevel(n),typeof console<"u"&&f.lookupLevel(f.level)<=n){var r=f.methodMap[n];console[r]||(r="log");for(var c=arguments.length,a=Array(c>1?c-1:0),h=1;h<c;h++)a[h-1]=arguments[h];console[r].apply(console,a)}}};e.default=f,t.exports=e.default})(ke,ke.exports)),ke.exports}var K={},Pe={},gt;function Pn(){if(gt)return Pe;gt=1,Pe.__esModule=!0,Pe.createNewLookupObject=e;var t=H();function e(){for(var i=arguments.length,f=Array(i),u=0;u<i;u++)f[u]=arguments[u];return t.extend.apply(void 0,[Object.create(null)].concat(f))}return Pe}var vt;function Qt(){if(vt)return K;vt=1,K.__esModule=!0,K.createProtoAccessControl=n,K.resultIsAllowed=r,K.resetLoggedProperties=h;function t(p){return p&&p.__esModule?p:{default:p}}var e=Pn(),i=Zt(),f=t(i),u=Object.create(null);function n(p){var d=Object.create(null);d.constructor=!1,d.__defineGetter__=!1,d.__defineSetter__=!1,d.__lookupGetter__=!1;var l=Object.create(null);return l.__proto__=!1,{properties:{whitelist:e.createNewLookupObject(l,p.allowedProtoProperties),defaultValue:p.allowProtoPropertiesByDefault},methods:{whitelist:e.createNewLookupObject(d,p.allowedProtoMethods),defaultValue:p.allowProtoMethodsByDefault}}}function r(p,d,l){return c(typeof p=="function"?d.methods:d.properties,l)}function c(p,d){return p.whitelist[d]!==void 0?p.whitelist[d]===!0:p.defaultValue!==void 0?p.defaultValue:(a(d),!1)}function a(p){u[p]!==!0&&(u[p]=!0,f.default.log("error",'Handlebars: Access has been denied to resolve the property "'+p+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function h(){Object.keys(u).forEach(function(p){delete u[p]})}return K}var _t;function tt(){if(_t)return z;_t=1,z.__esModule=!0,z.HandlebarsEnvironment=s;function t(g){return g&&g.__esModule?g:{default:g}}var e=H(),i=Z(),f=t(i),u=zt(),n=kn(),r=Zt(),c=t(r),a=Qt(),h="4.7.8";z.VERSION=h;var p=8;z.COMPILER_REVISION=p;var d=7;z.LAST_COMPATIBLE_COMPILER_REVISION=d;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};z.REVISION_CHANGES=l;var o="[object Object]";function s(g,_,y){this.helpers=g||{},this.partials=_||{},this.decorators=y||{},u.registerDefaultHelpers(this),n.registerDefaultDecorators(this)}s.prototype={constructor:s,logger:c.default,log:c.default.log,registerHelper:function(_,y){if(e.toString.call(_)===o){if(y)throw new f.default("Arg not supported with multiple helpers");e.extend(this.helpers,_)}else this.helpers[_]=y},unregisterHelper:function(_){delete this.helpers[_]},registerPartial:function(_,y){if(e.toString.call(_)===o)e.extend(this.partials,_);else{if(typeof y>"u")throw new f.default('Attempting to register a partial called "'+_+'" as undefined');this.partials[_]=y}},unregisterPartial:function(_){delete this.partials[_]},registerDecorator:function(_,y){if(e.toString.call(_)===o){if(y)throw new f.default("Arg not supported with multiple decorators");e.extend(this.decorators,_)}else this.decorators[_]=y},unregisterDecorator:function(_){delete this.decorators[_]},resetLoggedPropertyAccesses:function(){a.resetLoggedProperties()}};var m=c.default.log;return z.log=m,z.createFrame=e.createFrame,z.logger=c.default,z}var Se={exports:{}},yt;function Sn(){return yt||(yt=1,(function(t,e){e.__esModule=!0;function i(f){this.string=f}i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default})(Se,Se.exports)),Se.exports}var Q={},we={},bt;function wn(){if(bt)return we;bt=1,we.__esModule=!0,we.wrapHelper=t;function t(e,i){if(typeof e!="function")return e;var f=function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=i(n),e.apply(this,arguments)};return f}return we}var Ct;function En(){if(Ct)return Q;Ct=1,Q.__esModule=!0,Q.checkRevision=p,Q.template=d,Q.wrapProgram=l,Q.resolvePartial=o,Q.invokePartial=s,Q.noop=m;function t(v){return v&&v.__esModule?v:{default:v}}function e(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(b[C]=v[C]);return b.default=v,b}var i=H(),f=e(i),u=Z(),n=t(u),r=tt(),c=zt(),a=wn(),h=Qt();function p(v){var b=v&&v[0]||1,C=r.COMPILER_REVISION;if(!(b>=r.LAST_COMPATIBLE_COMPILER_REVISION&&b<=r.COMPILER_REVISION))if(b<r.LAST_COMPATIBLE_COMPILER_REVISION){var P=r.REVISION_CHANGES[C],E=r.REVISION_CHANGES[b];throw new n.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+P+") or downgrade your runtime to an older version ("+E+").")}else throw new n.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+v[1]+").")}function d(v,b){if(!b)throw new n.default("No environment passed to template");if(!v||!v.main)throw new n.default("Unknown template object: "+typeof v);v.main.decorator=v.main_d,b.VM.checkRevision(v.compiler);var C=v.compiler&&v.compiler[0]===7;function P(w,S,x){x.hash&&(S=f.extend({},S,x.hash),x.ids&&(x.ids[0]=!0)),w=b.VM.resolvePartial.call(this,w,S,x);var L=f.extend({},x,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),R=b.VM.invokePartial.call(this,w,S,L);if(R==null&&b.compile&&(x.partials[x.name]=b.compile(w,v.compilerOptions,b),R=x.partials[x.name](S,L)),R!=null){if(x.indent){for(var q=R.split(`
`),V=0,te=q.length;V<te&&!(!q[V]&&V+1===te);V++)q[V]=x.indent+q[V];R=q.join(`
`)}return R}else throw new n.default("The partial "+x.name+" could not be compiled when running in runtime-only mode")}var E={strict:function(S,x,L){if(!S||!(x in S))throw new n.default('"'+x+'" not defined in '+S,{loc:L});return E.lookupProperty(S,x)},lookupProperty:function(S,x){var L=S[x];if(L==null||Object.prototype.hasOwnProperty.call(S,x)||h.resultIsAllowed(L,E.protoAccessControl,x))return L},lookup:function(S,x){for(var L=S.length,R=0;R<L;R++){var q=S[R]&&E.lookupProperty(S[R],x);if(q!=null)return S[R][x]}},lambda:function(S,x){return typeof S=="function"?S.call(x):S},escapeExpression:f.escapeExpression,invokePartial:P,fn:function(S){var x=v[S];return x.decorator=v[S+"_d"],x},programs:[],program:function(S,x,L,R,q){var V=this.programs[S],te=this.fn(S);return x||q||R||L?V=l(this,S,te,x,L,R,q):V||(V=this.programs[S]=l(this,S,te)),V},data:function(S,x){for(;S&&x--;)S=S._parent;return S},mergeIfNeeded:function(S,x){var L=S||x;return S&&x&&S!==x&&(L=f.extend({},x,S)),L},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:v.compiler};function M(w){var S=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],x=S.data;M._setup(S),!S.partial&&v.useData&&(x=g(w,x));var L=void 0,R=v.useBlockParams?[]:void 0;v.useDepths&&(S.depths?L=w!=S.depths[0]?[w].concat(S.depths):S.depths:L=[w]);function q(V){return""+v.main(E,V,E.helpers,E.partials,x,R,L)}return q=_(v.main,q,E,S.depths||[],x,R),q(w,S)}return M.isTop=!0,M._setup=function(w){if(w.partial)E.protoAccessControl=w.protoAccessControl,E.helpers=w.helpers,E.partials=w.partials,E.decorators=w.decorators,E.hooks=w.hooks;else{var S=f.extend({},b.helpers,w.helpers);y(S,E),E.helpers=S,v.usePartial&&(E.partials=E.mergeIfNeeded(w.partials,b.partials)),(v.usePartial||v.useDecorators)&&(E.decorators=f.extend({},b.decorators,w.decorators)),E.hooks={},E.protoAccessControl=h.createProtoAccessControl(w);var x=w.allowCallsToHelperMissing||C;c.moveHelperToHooks(E,"helperMissing",x),c.moveHelperToHooks(E,"blockHelperMissing",x)}},M._child=function(w,S,x,L){if(v.useBlockParams&&!x)throw new n.default("must pass block params");if(v.useDepths&&!L)throw new n.default("must pass parent depths");return l(E,w,v[w],S,0,x,L)},M}function l(v,b,C,P,E,M,w){function S(x){var L=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],R=w;return w&&x!=w[0]&&!(x===v.nullContext&&w[0]===null)&&(R=[x].concat(w)),C(v,x,v.helpers,v.partials,L.data||P,M&&[L.blockParams].concat(M),R)}return S=_(C,S,v,w,P,M),S.program=b,S.depth=w?w.length:0,S.blockParams=E||0,S}function o(v,b,C){return v?!v.call&&!C.name&&(C.name=v,v=C.partials[v]):C.name==="@partial-block"?v=C.data["partial-block"]:v=C.partials[C.name],v}function s(v,b,C){var P=C.data&&C.data["partial-block"];C.partial=!0,C.ids&&(C.data.contextPath=C.ids[0]||C.data.contextPath);var E=void 0;if(C.fn&&C.fn!==m&&(function(){C.data=r.createFrame(C.data);var M=C.fn;E=C.data["partial-block"]=function(S){var x=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return x.data=r.createFrame(x.data),x.data["partial-block"]=P,M(S,x)},M.partials&&(C.partials=f.extend({},C.partials,M.partials))})(),v===void 0&&E&&(v=E),v===void 0)throw new n.default("The partial "+C.name+" could not be found");if(v instanceof Function)return v(b,C)}function m(){return""}function g(v,b){return(!b||!("root"in b))&&(b=b?r.createFrame(b):{},b.root=v),b}function _(v,b,C,P,E,M){if(v.decorator){var w={};b=v.decorator(b,w,C,P&&P[0],E,M,P),f.extend(b,w)}return b}function y(v,b){Object.keys(v).forEach(function(C){var P=v[C];v[C]=k(P,b)})}function k(v,b){var C=b.lookupProperty;return a.wrapHelper(v,function(P){return f.extend({lookupProperty:C},P)})}return Q}var Ee={exports:{}},kt;function Jt(){return kt||(kt=1,(function(t,e){e.__esModule=!0,e.default=function(i){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var f=globalThis.Handlebars;i.noConflict=function(){return globalThis.Handlebars===i&&(globalThis.Handlebars=f),i}},t.exports=e.default})(Ee,Ee.exports)),Ee.exports}var Pt;function xn(){return Pt||(Pt=1,(function(t,e){e.__esModule=!0;function i(y){return y&&y.__esModule?y:{default:y}}function f(y){if(y&&y.__esModule)return y;var k={};if(y!=null)for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(k[v]=y[v]);return k.default=y,k}var u=tt(),n=f(u),r=Sn(),c=i(r),a=Z(),h=i(a),p=H(),d=f(p),l=En(),o=f(l),s=Jt(),m=i(s);function g(){var y=new n.HandlebarsEnvironment;return d.extend(y,n),y.SafeString=c.default,y.Exception=h.default,y.Utils=d,y.escapeExpression=d.escapeExpression,y.VM=o,y.template=function(k){return o.template(k,y)},y}var _=g();_.create=g,m.default(_),_.default=_,e.default=_,t.exports=e.default})(pe,pe.exports)),pe.exports}var xe={exports:{}},St;function Kt(){return St||(St=1,(function(t,e){e.__esModule=!0;var i={helpers:{helperExpression:function(u){return u.type==="SubExpression"||(u.type==="MustacheStatement"||u.type==="BlockStatement")&&!!(u.params&&u.params.length||u.hash)},scopedId:function(u){return/^\.|this\b/.test(u.original)},simpleId:function(u){return u.parts.length===1&&!i.helpers.scopedId(u)&&!u.depth}}};e.default=i,t.exports=e.default})(xe,xe.exports)),xe.exports}var Y={},Me={exports:{}},wt;function Mn(){return wt||(wt=1,(function(t,e){e.__esModule=!0;var i=(function(){var f={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(c,a,h,p,d,l,o){var s=l.length-1;switch(d){case 1:return l[s-1];case 2:this.$=p.prepareProgram(l[s]);break;case 3:this.$=l[s];break;case 4:this.$=l[s];break;case 5:this.$=l[s];break;case 6:this.$=l[s];break;case 7:this.$=l[s];break;case 8:this.$=l[s];break;case 9:this.$={type:"CommentStatement",value:p.stripComment(l[s]),strip:p.stripFlags(l[s],l[s]),loc:p.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:l[s],value:l[s],loc:p.locInfo(this._$)};break;case 11:this.$=p.prepareRawBlock(l[s-2],l[s-1],l[s],this._$);break;case 12:this.$={path:l[s-3],params:l[s-2],hash:l[s-1]};break;case 13:this.$=p.prepareBlock(l[s-3],l[s-2],l[s-1],l[s],!1,this._$);break;case 14:this.$=p.prepareBlock(l[s-3],l[s-2],l[s-1],l[s],!0,this._$);break;case 15:this.$={open:l[s-5],path:l[s-4],params:l[s-3],hash:l[s-2],blockParams:l[s-1],strip:p.stripFlags(l[s-5],l[s])};break;case 16:this.$={path:l[s-4],params:l[s-3],hash:l[s-2],blockParams:l[s-1],strip:p.stripFlags(l[s-5],l[s])};break;case 17:this.$={path:l[s-4],params:l[s-3],hash:l[s-2],blockParams:l[s-1],strip:p.stripFlags(l[s-5],l[s])};break;case 18:this.$={strip:p.stripFlags(l[s-1],l[s-1]),program:l[s]};break;case 19:var m=p.prepareBlock(l[s-2],l[s-1],l[s],l[s],!1,this._$),g=p.prepareProgram([m],l[s-1].loc);g.chained=!0,this.$={strip:l[s-2].strip,program:g,chain:!0};break;case 20:this.$=l[s];break;case 21:this.$={path:l[s-1],strip:p.stripFlags(l[s-2],l[s])};break;case 22:this.$=p.prepareMustache(l[s-3],l[s-2],l[s-1],l[s-4],p.stripFlags(l[s-4],l[s]),this._$);break;case 23:this.$=p.prepareMustache(l[s-3],l[s-2],l[s-1],l[s-4],p.stripFlags(l[s-4],l[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:l[s-3],params:l[s-2],hash:l[s-1],indent:"",strip:p.stripFlags(l[s-4],l[s]),loc:p.locInfo(this._$)};break;case 25:this.$=p.preparePartialBlock(l[s-2],l[s-1],l[s],this._$);break;case 26:this.$={path:l[s-3],params:l[s-2],hash:l[s-1],strip:p.stripFlags(l[s-4],l[s])};break;case 27:this.$=l[s];break;case 28:this.$=l[s];break;case 29:this.$={type:"SubExpression",path:l[s-3],params:l[s-2],hash:l[s-1],loc:p.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:l[s],loc:p.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:p.id(l[s-2]),value:l[s],loc:p.locInfo(this._$)};break;case 32:this.$=p.id(l[s-1]);break;case 33:this.$=l[s];break;case 34:this.$=l[s];break;case 35:this.$={type:"StringLiteral",value:l[s],original:l[s],loc:p.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(l[s]),original:Number(l[s]),loc:p.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:l[s]==="true",original:l[s]==="true",loc:p.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:p.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:p.locInfo(this._$)};break;case 40:this.$=l[s];break;case 41:this.$=l[s];break;case 42:this.$=p.preparePath(!0,l[s],this._$);break;case 43:this.$=p.preparePath(!1,l[s],this._$);break;case 44:l[s-2].push({part:p.id(l[s]),original:l[s],separator:l[s-1]}),this.$=l[s-2];break;case 45:this.$=[{part:p.id(l[s]),original:l[s]}];break;case 46:this.$=[];break;case 47:l[s-1].push(l[s]);break;case 48:this.$=[];break;case 49:l[s-1].push(l[s]);break;case 50:this.$=[];break;case 51:l[s-1].push(l[s]);break;case 58:this.$=[];break;case 59:l[s-1].push(l[s]);break;case 64:this.$=[];break;case 65:l[s-1].push(l[s]);break;case 70:this.$=[];break;case 71:l[s-1].push(l[s]);break;case 78:this.$=[];break;case 79:l[s-1].push(l[s]);break;case 82:this.$=[];break;case 83:l[s-1].push(l[s]);break;case 86:this.$=[];break;case 87:l[s-1].push(l[s]);break;case 90:this.$=[];break;case 91:l[s-1].push(l[s]);break;case 94:this.$=[];break;case 95:l[s-1].push(l[s]);break;case 98:this.$=[l[s]];break;case 99:l[s-1].push(l[s]);break;case 100:this.$=[l[s]];break;case 101:l[s-1].push(l[s]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(c,a){throw new Error(c)},parse:function(c){var a=this,h=[0],p=[null],d=[],l=this.table,o="",s=0,m=0;this.lexer.setInput(c),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var g=this.lexer.yylloc;d.push(g);var _=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function y(){var L;return L=a.lexer.lex()||1,typeof L!="number"&&(L=a.symbols_[L]||L),L}for(var k,v,b,C,P={},E,M,w,S;;){if(v=h[h.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((k===null||typeof k>"u")&&(k=y()),b=l[v]&&l[v][k]),typeof b>"u"||!b.length||!b[0]){var x="";{S=[];for(E in l[v])this.terminals_[E]&&E>2&&S.push("'"+this.terminals_[E]+"'");this.lexer.showPosition?x="Parse error on line "+(s+1)+`:
`+this.lexer.showPosition()+`
Expecting `+S.join(", ")+", got '"+(this.terminals_[k]||k)+"'":x="Parse error on line "+(s+1)+": Unexpected "+(k==1?"end of input":"'"+(this.terminals_[k]||k)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[k]||k,line:this.lexer.yylineno,loc:g,expected:S})}}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+k);switch(b[0]){case 1:h.push(k),p.push(this.lexer.yytext),d.push(this.lexer.yylloc),h.push(b[1]),k=null,m=this.lexer.yyleng,o=this.lexer.yytext,s=this.lexer.yylineno,g=this.lexer.yylloc;break;case 2:if(M=this.productions_[b[1]][1],P.$=p[p.length-M],P._$={first_line:d[d.length-(M||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(M||1)].first_column,last_column:d[d.length-1].last_column},_&&(P._$.range=[d[d.length-(M||1)].range[0],d[d.length-1].range[1]]),C=this.performAction.call(P,o,m,s,this.yy,b[1],p,d),typeof C<"u")return C;M&&(h=h.slice(0,-1*M*2),p=p.slice(0,-1*M),d=d.slice(0,-1*M)),h.push(this.productions_[b[1]][0]),p.push(P.$),d.push(P._$),w=l[h[h.length-2]][h[h.length-1]],h.push(w);break;case 3:return!0}}return!0}},u=(function(){var r={EOF:1,parseError:function(a,h){if(this.yy.parser)this.yy.parser.parseError(a,h);else throw new Error(a)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var h=a.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var h=a.length,p=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h-1),this.offset-=h;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),p.length-1&&(this.yylineno-=p.length-1);var l=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:p?(p.length===d.length?this.yylloc.first_column:0)+d[d.length-p.length].length-p[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[l[0],l[0]+this.yyleng-h]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),h=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+h+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,h,p,d,l;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(p=this._input.match(this.rules[o[s]]),!(p&&(!h||p[0].length>h[0].length)&&(h=p,d=s,!this.options.flex)));s++);return h?(l=h[0].match(/(?:\r\n?|\n).*/g),l&&(this.yylineno+=l.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:l?l[l.length-1].length-l[l.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+h[0].length},this.yytext+=h[0],this.match+=h[0],this.matches=h,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(h[0].length),this.matched+=h[0],a=this.performAction.call(this,this.yy,this,o[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a<"u"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return r.options={},r.performAction=function(a,h,p,d){function l(o,s){return h.yytext=h.yytext.substring(o,h.yyleng-s+o)}switch(p){case 0:if(h.yytext.slice(-2)==="\\\\"?(l(0,1),this.begin("mu")):h.yytext.slice(-1)==="\\"?(l(0,1),this.begin("emu")):this.begin("mu"),h.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(l(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(h.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return h.yytext=l(1,2).replace(/\\"/g,'"'),80;case 32:return h.yytext=l(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return h.yytext=h.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},r.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],r.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},r})();f.lexer=u;function n(){this.yy={}}return n.prototype=f,f.Parser=n,new n})();e.default=i,t.exports=e.default})(Me,Me.exports)),Me.exports}var Le={exports:{}},Oe={exports:{}},Et;function Yt(){return Et||(Et=1,(function(t,e){e.__esModule=!0;function i(h){return h&&h.__esModule?h:{default:h}}var f=Z(),u=i(f);function n(){this.parents=[]}n.prototype={constructor:n,mutating:!1,acceptKey:function(p,d){var l=this.accept(p[d]);if(this.mutating){if(l&&!n.prototype[l.type])throw new u.default('Unexpected node type "'+l.type+'" found when accepting '+d+" on "+p.type);p[d]=l}},acceptRequired:function(p,d){if(this.acceptKey(p,d),!p[d])throw new u.default(p.type+" requires "+d)},acceptArray:function(p){for(var d=0,l=p.length;d<l;d++)this.acceptKey(p,d),p[d]||(p.splice(d,1),d--,l--)},accept:function(p){if(p){if(!this[p.type])throw new u.default("Unknown type: "+p.type,p);this.current&&this.parents.unshift(this.current),this.current=p;var d=this[p.type](p);if(this.current=this.parents.shift(),!this.mutating||d)return d;if(d!==!1)return p}},Program:function(p){this.acceptArray(p.body)},MustacheStatement:r,Decorator:r,BlockStatement:c,DecoratorBlock:c,PartialStatement:a,PartialBlockStatement:function(p){a.call(this,p),this.acceptKey(p,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(p){this.acceptArray(p.pairs)},HashPair:function(p){this.acceptRequired(p,"value")}};function r(h){this.acceptRequired(h,"path"),this.acceptArray(h.params),this.acceptKey(h,"hash")}function c(h){r.call(this,h),this.acceptKey(h,"program"),this.acceptKey(h,"inverse")}function a(h){this.acceptRequired(h,"name"),this.acceptArray(h.params),this.acceptKey(h,"hash")}e.default=n,t.exports=e.default})(Oe,Oe.exports)),Oe.exports}var xt;function Ln(){return xt||(xt=1,(function(t,e){e.__esModule=!0;function i(p){return p&&p.__esModule?p:{default:p}}var f=Yt(),u=i(f);function n(){var p=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=p}n.prototype=new u.default,n.prototype.Program=function(p){var d=!this.options.ignoreStandalone,l=!this.isRootSeen;this.isRootSeen=!0;for(var o=p.body,s=0,m=o.length;s<m;s++){var g=o[s],_=this.accept(g);if(_){var y=r(o,s,l),k=c(o,s,l),v=_.openStandalone&&y,b=_.closeStandalone&&k,C=_.inlineStandalone&&y&&k;_.close&&a(o,s,!0),_.open&&h(o,s,!0),d&&C&&(a(o,s),h(o,s)&&g.type==="PartialStatement"&&(g.indent=/([ \t]+$)/.exec(o[s-1].original)[1])),d&&v&&(a((g.program||g.inverse).body),h(o,s)),d&&b&&(a(o,s),h((g.inverse||g.program).body))}}return p},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(p){this.accept(p.program),this.accept(p.inverse);var d=p.program||p.inverse,l=p.program&&p.inverse,o=l,s=l;if(l&&l.chained)for(o=l.body[0].program;s.chained;)s=s.body[s.body.length-1].program;var m={open:p.openStrip.open,close:p.closeStrip.close,openStandalone:c(d.body),closeStandalone:r((o||d).body)};if(p.openStrip.close&&a(d.body,null,!0),l){var g=p.inverseStrip;g.open&&h(d.body,null,!0),g.close&&a(o.body,null,!0),p.closeStrip.open&&h(s.body,null,!0),!this.options.ignoreStandalone&&r(d.body)&&c(o.body)&&(h(d.body),a(o.body))}else p.closeStrip.open&&h(d.body,null,!0);return m},n.prototype.Decorator=n.prototype.MustacheStatement=function(p){return p.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(p){var d=p.strip||{};return{inlineStandalone:!0,open:d.open,close:d.close}};function r(p,d,l){d===void 0&&(d=p.length);var o=p[d-1],s=p[d-2];if(!o)return l;if(o.type==="ContentStatement")return(s||!l?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(o.original)}function c(p,d,l){d===void 0&&(d=-1);var o=p[d+1],s=p[d+2];if(!o)return l;if(o.type==="ContentStatement")return(s||!l?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(o.original)}function a(p,d,l){var o=p[d==null?0:d+1];if(!(!o||o.type!=="ContentStatement"||!l&&o.rightStripped)){var s=o.value;o.value=o.value.replace(l?/^\s+/:/^[ \t]*\r?\n?/,""),o.rightStripped=o.value!==s}}function h(p,d,l){var o=p[d==null?p.length-1:d-1];if(!(!o||o.type!=="ContentStatement"||!l&&o.leftStripped)){var s=o.value;return o.value=o.value.replace(l?/\s+$/:/[ \t]+$/,""),o.leftStripped=o.value!==s,o.leftStripped}}e.default=n,t.exports=e.default})(Le,Le.exports)),Le.exports}var F={},Mt;function On(){if(Mt)return F;Mt=1,F.__esModule=!0,F.SourceLocation=u,F.id=n,F.stripFlags=r,F.stripComment=c,F.preparePath=a,F.prepareMustache=h,F.prepareRawBlock=p,F.prepareBlock=d,F.prepareProgram=l,F.preparePartialBlock=o;function t(s){return s&&s.__esModule?s:{default:s}}var e=Z(),i=t(e);function f(s,m){if(m=m.path?m.path.original:m,s.path.original!==m){var g={loc:s.path.loc};throw new i.default(s.path.original+" doesn't match "+m,g)}}function u(s,m){this.source=s,this.start={line:m.first_line,column:m.first_column},this.end={line:m.last_line,column:m.last_column}}function n(s){return/^\[.*\]$/.test(s)?s.substring(1,s.length-1):s}function r(s,m){return{open:s.charAt(2)==="~",close:m.charAt(m.length-3)==="~"}}function c(s){return s.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function a(s,m,g){g=this.locInfo(g);for(var _=s?"@":"",y=[],k=0,v=0,b=m.length;v<b;v++){var C=m[v].part,P=m[v].original!==C;if(_+=(m[v].separator||"")+C,!P&&(C===".."||C==="."||C==="this")){if(y.length>0)throw new i.default("Invalid path: "+_,{loc:g});C===".."&&k++}else y.push(C)}return{type:"PathExpression",data:s,depth:k,parts:y,original:_,loc:g}}function h(s,m,g,_,y,k){var v=_.charAt(3)||_.charAt(2),b=v!=="{"&&v!=="&",C=/\*/.test(_);return{type:C?"Decorator":"MustacheStatement",path:s,params:m,hash:g,escaped:b,strip:y,loc:this.locInfo(k)}}function p(s,m,g,_){f(s,g),_=this.locInfo(_);var y={type:"Program",body:m,strip:{},loc:_};return{type:"BlockStatement",path:s.path,params:s.params,hash:s.hash,program:y,openStrip:{},inverseStrip:{},closeStrip:{},loc:_}}function d(s,m,g,_,y,k){_&&_.path&&f(s,_);var v=/\*/.test(s.open);m.blockParams=s.blockParams;var b=void 0,C=void 0;if(g){if(v)throw new i.default("Unexpected inverse block on decorator",g);g.chain&&(g.program.body[0].closeStrip=_.strip),C=g.strip,b=g.program}return y&&(y=b,b=m,m=y),{type:v?"DecoratorBlock":"BlockStatement",path:s.path,params:s.params,hash:s.hash,program:m,inverse:b,openStrip:s.strip,inverseStrip:C,closeStrip:_&&_.strip,loc:this.locInfo(k)}}function l(s,m){if(!m&&s.length){var g=s[0].loc,_=s[s.length-1].loc;g&&_&&(m={source:g.source,start:{line:g.start.line,column:g.start.column},end:{line:_.end.line,column:_.end.column}})}return{type:"Program",body:s,strip:{},loc:m}}function o(s,m,g,_){return f(s,g),{type:"PartialBlockStatement",name:s.path,params:s.params,hash:s.hash,program:m,openStrip:s.strip,closeStrip:g&&g.strip,loc:this.locInfo(_)}}return F}var Lt;function An(){if(Lt)return Y;Lt=1,Y.__esModule=!0,Y.parseWithoutProcessing=p,Y.parse=d;function t(l){if(l&&l.__esModule)return l;var o={};if(l!=null)for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(o[s]=l[s]);return o.default=l,o}function e(l){return l&&l.__esModule?l:{default:l}}var i=Mn(),f=e(i),u=Ln(),n=e(u),r=On(),c=t(r),a=H();Y.parser=f.default;var h={};a.extend(h,c);function p(l,o){if(l.type==="Program")return l;f.default.yy=h,h.locInfo=function(m){return new h.SourceLocation(o&&o.srcName,m)};var s=f.default.parse(l);return s}function d(l,o){var s=p(l,o),m=new n.default(o);return m.accept(s)}return Y}var X={},Ot;function In(){if(Ot)return X;Ot=1,X.__esModule=!0,X.Compiler=c,X.precompile=a,X.compile=h;function t(l){return l&&l.__esModule?l:{default:l}}var e=Z(),i=t(e),f=H(),u=Kt(),n=t(u),r=[].slice;function c(){}c.prototype={compiler:c,equals:function(o){var s=this.opcodes.length;if(o.opcodes.length!==s)return!1;for(var m=0;m<s;m++){var g=this.opcodes[m],_=o.opcodes[m];if(g.opcode!==_.opcode||!p(g.args,_.args))return!1}s=this.children.length;for(var m=0;m<s;m++)if(!this.children[m].equals(o.children[m]))return!1;return!0},guid:0,compile:function(o,s){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=s,this.stringParams=s.stringParams,this.trackIds=s.trackIds,s.blockParams=s.blockParams||[],s.knownHelpers=f.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},s.knownHelpers),this.accept(o)},compileProgram:function(o){var s=new this.compiler,m=s.compile(o,this.options),g=this.guid++;return this.usePartial=this.usePartial||m.usePartial,this.children[g]=m,this.useDepths=this.useDepths||m.useDepths,g},accept:function(o){if(!this[o.type])throw new i.default("Unknown type: "+o.type,o);this.sourceNode.unshift(o);var s=this[o.type](o);return this.sourceNode.shift(),s},Program:function(o){this.options.blockParams.unshift(o.blockParams);for(var s=o.body,m=s.length,g=0;g<m;g++)this.accept(s[g]);return this.options.blockParams.shift(),this.isSimple=m===1,this.blockParams=o.blockParams?o.blockParams.length:0,this},BlockStatement:function(o){d(o);var s=o.program,m=o.inverse;s=s&&this.compileProgram(s),m=m&&this.compileProgram(m);var g=this.classifySexpr(o);g==="helper"?this.helperSexpr(o,s,m):g==="simple"?(this.simpleSexpr(o),this.opcode("pushProgram",s),this.opcode("pushProgram",m),this.opcode("emptyHash"),this.opcode("blockValue",o.path.original)):(this.ambiguousSexpr(o,s,m),this.opcode("pushProgram",s),this.opcode("pushProgram",m),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(o){var s=o.program&&this.compileProgram(o.program),m=this.setupFullMustacheParams(o,s,void 0),g=o.path;this.useDecorators=!0,this.opcode("registerDecorator",m.length,g.original)},PartialStatement:function(o){this.usePartial=!0;var s=o.program;s&&(s=this.compileProgram(o.program));var m=o.params;if(m.length>1)throw new i.default("Unsupported number of partial arguments: "+m.length,o);m.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):m.push({type:"PathExpression",parts:[],depth:0}));var g=o.name.original,_=o.name.type==="SubExpression";_&&this.accept(o.name),this.setupFullMustacheParams(o,s,void 0,!0);var y=o.indent||"";this.options.preventIndent&&y&&(this.opcode("appendContent",y),y=""),this.opcode("invokePartial",_,g,y),this.opcode("append")},PartialBlockStatement:function(o){this.PartialStatement(o)},MustacheStatement:function(o){this.SubExpression(o),o.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(o){this.DecoratorBlock(o)},ContentStatement:function(o){o.value&&this.opcode("appendContent",o.value)},CommentStatement:function(){},SubExpression:function(o){d(o);var s=this.classifySexpr(o);s==="simple"?this.simpleSexpr(o):s==="helper"?this.helperSexpr(o):this.ambiguousSexpr(o)},ambiguousSexpr:function(o,s,m){var g=o.path,_=g.parts[0],y=s!=null||m!=null;this.opcode("getContext",g.depth),this.opcode("pushProgram",s),this.opcode("pushProgram",m),g.strict=!0,this.accept(g),this.opcode("invokeAmbiguous",_,y)},simpleSexpr:function(o){var s=o.path;s.strict=!0,this.accept(s),this.opcode("resolvePossibleLambda")},helperSexpr:function(o,s,m){var g=this.setupFullMustacheParams(o,s,m),_=o.path,y=_.parts[0];if(this.options.knownHelpers[y])this.opcode("invokeKnownHelper",g.length,y);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+y,o);_.strict=!0,_.falsy=!0,this.accept(_),this.opcode("invokeHelper",g.length,_.original,n.default.helpers.simpleId(_))}},PathExpression:function(o){this.addDepth(o.depth),this.opcode("getContext",o.depth);var s=o.parts[0],m=n.default.helpers.scopedId(o),g=!o.depth&&!m&&this.blockParamIndex(s);g?this.opcode("lookupBlockParam",g,o.parts):s?o.data?(this.options.data=!0,this.opcode("lookupData",o.depth,o.parts,o.strict)):this.opcode("lookupOnContext",o.parts,o.falsy,o.strict,m):this.opcode("pushContext")},StringLiteral:function(o){this.opcode("pushString",o.value)},NumberLiteral:function(o){this.opcode("pushLiteral",o.value)},BooleanLiteral:function(o){this.opcode("pushLiteral",o.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(o){var s=o.pairs,m=0,g=s.length;for(this.opcode("pushHash");m<g;m++)this.pushParam(s[m].value);for(;m--;)this.opcode("assignToHash",s[m].key);this.opcode("popHash")},opcode:function(o){this.opcodes.push({opcode:o,args:r.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(o){o&&(this.useDepths=!0)},classifySexpr:function(o){var s=n.default.helpers.simpleId(o.path),m=s&&!!this.blockParamIndex(o.path.parts[0]),g=!m&&n.default.helpers.helperExpression(o),_=!m&&(g||s);if(_&&!g){var y=o.path.parts[0],k=this.options;k.knownHelpers[y]?g=!0:k.knownHelpersOnly&&(_=!1)}return g?"helper":_?"ambiguous":"simple"},pushParams:function(o){for(var s=0,m=o.length;s<m;s++)this.pushParam(o[s])},pushParam:function(o){var s=o.value!=null?o.value:o.original||"";if(this.stringParams)s.replace&&(s=s.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),o.depth&&this.addDepth(o.depth),this.opcode("getContext",o.depth||0),this.opcode("pushStringParam",s,o.type),o.type==="SubExpression"&&this.accept(o);else{if(this.trackIds){var m=void 0;if(o.parts&&!n.default.helpers.scopedId(o)&&!o.depth&&(m=this.blockParamIndex(o.parts[0])),m){var g=o.parts.slice(1).join(".");this.opcode("pushId","BlockParam",m,g)}else s=o.original||s,s.replace&&(s=s.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",o.type,s)}this.accept(o)}},setupFullMustacheParams:function(o,s,m,g){var _=o.params;return this.pushParams(_),this.opcode("pushProgram",s),this.opcode("pushProgram",m),o.hash?this.accept(o.hash):this.opcode("emptyHash",g),_},blockParamIndex:function(o){for(var s=0,m=this.options.blockParams.length;s<m;s++){var g=this.options.blockParams[s],_=g&&f.indexOf(g,o);if(g&&_>=0)return[s,_]}}};function a(l,o,s){if(l==null||typeof l!="string"&&l.type!=="Program")throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+l);o=o||{},"data"in o||(o.data=!0),o.compat&&(o.useDepths=!0);var m=s.parse(l,o),g=new s.Compiler().compile(m,o);return new s.JavaScriptCompiler().compile(g,o)}function h(l,o,s){if(o===void 0&&(o={}),l==null||typeof l!="string"&&l.type!=="Program")throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+l);o=f.extend({},o),"data"in o||(o.data=!0),o.compat&&(o.useDepths=!0);var m=void 0;function g(){var y=s.parse(l,o),k=new s.Compiler().compile(y,o),v=new s.JavaScriptCompiler().compile(k,o,void 0,!0);return s.template(v)}function _(y,k){return m||(m=g()),m.call(this,y,k)}return _._setup=function(y){return m||(m=g()),m._setup(y)},_._child=function(y,k,v,b){return m||(m=g()),m._child(y,k,v,b)},_}function p(l,o){if(l===o)return!0;if(f.isArray(l)&&f.isArray(o)&&l.length===o.length){for(var s=0;s<l.length;s++)if(!p(l[s],o[s]))return!1;return!0}}function d(l){if(!l.path.parts){var o=l.path;l.path={type:"PathExpression",data:!1,depth:0,parts:[o.original+""],original:o.original+"",loc:o.loc}}}return X}var Ae={exports:{}},Ie={exports:{}},re={},je={},Re={},De={},At;function Rn(){if(At)return De;At=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return De.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},De.decode=function(e){var i=65,f=90,u=97,n=122,r=48,c=57,a=43,h=47,p=26,d=52;return i<=e&&e<=f?e-i:u<=e&&e<=n?e-u+p:r<=e&&e<=c?e-r+d:e==a?62:e==h?63:-1},De}var It;function Xt(){if(It)return Re;It=1;var t=Rn(),e=5,i=1<<e,f=i-1,u=i;function n(c){return c<0?(-c<<1)+1:(c<<1)+0}function r(c){var a=(c&1)===1,h=c>>1;return a?-h:h}return Re.encode=function(a){var h="",p,d=n(a);do p=d&f,d>>>=e,d>0&&(p|=u),h+=t.encode(p);while(d>0);return h},Re.decode=function(a,h,p){var d=a.length,l=0,o=0,s,m;do{if(h>=d)throw new Error("Expected more digits in base 64 VLQ value.");if(m=t.decode(a.charCodeAt(h++)),m===-1)throw new Error("Invalid base64 digit: "+a.charAt(h-1));s=!!(m&u),m&=f,l=l+(m<<o),o+=e}while(s);p.value=r(l),p.rest=h},Re}var ze={},Rt;function oe(){return Rt||(Rt=1,(function(t){function e(v,b,C){if(b in v)return v[b];if(arguments.length===3)return C;throw new Error('"'+b+'" is a required argument.')}t.getArg=e;var i=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,f=/^data:.+\,.+$/;function u(v){var b=v.match(i);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}t.urlParse=u;function n(v){var b="";return v.scheme&&(b+=v.scheme+":"),b+="//",v.auth&&(b+=v.auth+"@"),v.host&&(b+=v.host),v.port&&(b+=":"+v.port),v.path&&(b+=v.path),b}t.urlGenerate=n;function r(v){var b=v,C=u(v);if(C){if(!C.path)return v;b=C.path}for(var P=t.isAbsolute(b),E=b.split(/\/+/),M,w=0,S=E.length-1;S>=0;S--)M=E[S],M==="."?E.splice(S,1):M===".."?w++:w>0&&(M===""?(E.splice(S+1,w),w=0):(E.splice(S,2),w--));return b=E.join("/"),b===""&&(b=P?"/":"."),C?(C.path=b,n(C)):b}t.normalize=r;function c(v,b){v===""&&(v="."),b===""&&(b=".");var C=u(b),P=u(v);if(P&&(v=P.path||"/"),C&&!C.scheme)return P&&(C.scheme=P.scheme),n(C);if(C||b.match(f))return b;if(P&&!P.host&&!P.path)return P.host=b,n(P);var E=b.charAt(0)==="/"?b:r(v.replace(/\/+$/,"")+"/"+b);return P?(P.path=E,n(P)):E}t.join=c,t.isAbsolute=function(v){return v.charAt(0)==="/"||i.test(v)};function a(v,b){v===""&&(v="."),v=v.replace(/\/$/,"");for(var C=0;b.indexOf(v+"/")!==0;){var P=v.lastIndexOf("/");if(P<0||(v=v.slice(0,P),v.match(/^([^\/]+:\/)?\/*$/)))return b;++C}return Array(C+1).join("../")+b.substr(v.length+1)}t.relative=a;var h=(function(){var v=Object.create(null);return!("__proto__"in v)})();function p(v){return v}function d(v){return o(v)?"$"+v:v}t.toSetString=h?p:d;function l(v){return o(v)?v.slice(1):v}t.fromSetString=h?p:l;function o(v){if(!v)return!1;var b=v.length;if(b<9||v.charCodeAt(b-1)!==95||v.charCodeAt(b-2)!==95||v.charCodeAt(b-3)!==111||v.charCodeAt(b-4)!==116||v.charCodeAt(b-5)!==111||v.charCodeAt(b-6)!==114||v.charCodeAt(b-7)!==112||v.charCodeAt(b-8)!==95||v.charCodeAt(b-9)!==95)return!1;for(var C=b-10;C>=0;C--)if(v.charCodeAt(C)!==36)return!1;return!0}function s(v,b,C){var P=g(v.source,b.source);return P!==0||(P=v.originalLine-b.originalLine,P!==0)||(P=v.originalColumn-b.originalColumn,P!==0||C)||(P=v.generatedColumn-b.generatedColumn,P!==0)||(P=v.generatedLine-b.generatedLine,P!==0)?P:g(v.name,b.name)}t.compareByOriginalPositions=s;function m(v,b,C){var P=v.generatedLine-b.generatedLine;return P!==0||(P=v.generatedColumn-b.generatedColumn,P!==0||C)||(P=g(v.source,b.source),P!==0)||(P=v.originalLine-b.originalLine,P!==0)||(P=v.originalColumn-b.originalColumn,P!==0)?P:g(v.name,b.name)}t.compareByGeneratedPositionsDeflated=m;function g(v,b){return v===b?0:v===null?1:b===null?-1:v>b?1:-1}function _(v,b){var C=v.generatedLine-b.generatedLine;return C!==0||(C=v.generatedColumn-b.generatedColumn,C!==0)||(C=g(v.source,b.source),C!==0)||(C=v.originalLine-b.originalLine,C!==0)||(C=v.originalColumn-b.originalColumn,C!==0)?C:g(v.name,b.name)}t.compareByGeneratedPositionsInflated=_;function y(v){return JSON.parse(v.replace(/^\)]}'[^\n]*\n/,""))}t.parseSourceMapInput=y;function k(v,b,C){if(b=b||"",v&&(v[v.length-1]!=="/"&&b[0]!=="/"&&(v+="/"),b=v+b),C){var P=u(C);if(!P)throw new Error("sourceMapURL could not be parsed");if(P.path){var E=P.path.lastIndexOf("/");E>=0&&(P.path=P.path.substring(0,E+1))}b=c(n(P),b)}return r(b)}t.computeSourceURL=k})(ze)),ze}var Ze={},Dt;function $t(){if(Dt)return Ze;Dt=1;var t=oe(),e=Object.prototype.hasOwnProperty,i=typeof Map<"u";function f(){this._array=[],this._set=i?new Map:Object.create(null)}return f.fromArray=function(n,r){for(var c=new f,a=0,h=n.length;a<h;a++)c.add(n[a],r);return c},f.prototype.size=function(){return i?this._set.size:Object.getOwnPropertyNames(this._set).length},f.prototype.add=function(n,r){var c=i?n:t.toSetString(n),a=i?this.has(n):e.call(this._set,c),h=this._array.length;(!a||r)&&this._array.push(n),a||(i?this._set.set(n,h):this._set[c]=h)},f.prototype.has=function(n){if(i)return this._set.has(n);var r=t.toSetString(n);return e.call(this._set,r)},f.prototype.indexOf=function(n){if(i){var r=this._set.get(n);if(r>=0)return r}else{var c=t.toSetString(n);if(e.call(this._set,c))return this._set[c]}throw new Error('"'+n+'" is not in the set.')},f.prototype.at=function(n){if(n>=0&&n<this._array.length)return this._array[n];throw new Error("No element indexed by "+n)},f.prototype.toArray=function(){return this._array.slice()},Ze.ArraySet=f,Ze}var Qe={},Nt;function Dn(){if(Nt)return Qe;Nt=1;var t=oe();function e(f,u){var n=f.generatedLine,r=u.generatedLine,c=f.generatedColumn,a=u.generatedColumn;return r>n||r==n&&a>=c||t.compareByGeneratedPositionsInflated(f,u)<=0}function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return i.prototype.unsortedForEach=function(u,n){this._array.forEach(u,n)},i.prototype.add=function(u){e(this._last,u)?(this._last=u,this._array.push(u)):(this._sorted=!1,this._array.push(u))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Qe.MappingList=i,Qe}var Tt;function en(){if(Tt)return je;Tt=1;var t=Xt(),e=oe(),i=$t().ArraySet,f=Dn().MappingList;function u(n){n||(n={}),this._file=e.getArg(n,"file",null),this._sourceRoot=e.getArg(n,"sourceRoot",null),this._skipValidation=e.getArg(n,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new f,this._sourcesContents=null}return u.prototype._version=3,u.fromSourceMap=function(r){var c=r.sourceRoot,a=new u({file:r.file,sourceRoot:c});return r.eachMapping(function(h){var p={generated:{line:h.generatedLine,column:h.generatedColumn}};h.source!=null&&(p.source=h.source,c!=null&&(p.source=e.relative(c,p.source)),p.original={line:h.originalLine,column:h.originalColumn},h.name!=null&&(p.name=h.name)),a.addMapping(p)}),r.sources.forEach(function(h){var p=h;c!==null&&(p=e.relative(c,h)),a._sources.has(p)||a._sources.add(p);var d=r.sourceContentFor(h);d!=null&&a.setSourceContent(h,d)}),a},u.prototype.addMapping=function(r){var c=e.getArg(r,"generated"),a=e.getArg(r,"original",null),h=e.getArg(r,"source",null),p=e.getArg(r,"name",null);this._skipValidation||this._validateMapping(c,a,h,p),h!=null&&(h=String(h),this._sources.has(h)||this._sources.add(h)),p!=null&&(p=String(p),this._names.has(p)||this._names.add(p)),this._mappings.add({generatedLine:c.line,generatedColumn:c.column,originalLine:a!=null&&a.line,originalColumn:a!=null&&a.column,source:h,name:p})},u.prototype.setSourceContent=function(r,c){var a=r;this._sourceRoot!=null&&(a=e.relative(this._sourceRoot,a)),c!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(a)]=c):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(a)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},u.prototype.applySourceMap=function(r,c,a){var h=c;if(c==null){if(r.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);h=r.file}var p=this._sourceRoot;p!=null&&(h=e.relative(p,h));var d=new i,l=new i;this._mappings.unsortedForEach(function(o){if(o.source===h&&o.originalLine!=null){var s=r.originalPositionFor({line:o.originalLine,column:o.originalColumn});s.source!=null&&(o.source=s.source,a!=null&&(o.source=e.join(a,o.source)),p!=null&&(o.source=e.relative(p,o.source)),o.originalLine=s.line,o.originalColumn=s.column,s.name!=null&&(o.name=s.name))}var m=o.source;m!=null&&!d.has(m)&&d.add(m);var g=o.name;g!=null&&!l.has(g)&&l.add(g)},this),this._sources=d,this._names=l,r.sources.forEach(function(o){var s=r.sourceContentFor(o);s!=null&&(a!=null&&(o=e.join(a,o)),p!=null&&(o=e.relative(p,o)),this.setSourceContent(o,s))},this)},u.prototype._validateMapping=function(r,c,a,h){if(c&&typeof c.line!="number"&&typeof c.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(r&&"line"in r&&"column"in r&&r.line>0&&r.column>=0&&!c&&!a&&!h)){if(r&&"line"in r&&"column"in r&&c&&"line"in c&&"column"in c&&r.line>0&&r.column>=0&&c.line>0&&c.column>=0&&a)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:r,source:a,original:c,name:h}))}},u.prototype._serializeMappings=function(){for(var r=0,c=1,a=0,h=0,p=0,d=0,l="",o,s,m,g,_=this._mappings.toArray(),y=0,k=_.length;y<k;y++){if(s=_[y],o="",s.generatedLine!==c)for(r=0;s.generatedLine!==c;)o+=";",c++;else if(y>0){if(!e.compareByGeneratedPositionsInflated(s,_[y-1]))continue;o+=","}o+=t.encode(s.generatedColumn-r),r=s.generatedColumn,s.source!=null&&(g=this._sources.indexOf(s.source),o+=t.encode(g-d),d=g,o+=t.encode(s.originalLine-1-h),h=s.originalLine-1,o+=t.encode(s.originalColumn-a),a=s.originalColumn,s.name!=null&&(m=this._names.indexOf(s.name),o+=t.encode(m-p),p=m)),l+=o}return l},u.prototype._generateSourcesContent=function(r,c){return r.map(function(a){if(!this._sourcesContents)return null;c!=null&&(a=e.relative(c,a));var h=e.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,h)?this._sourcesContents[h]:null},this)},u.prototype.toJSON=function(){var r={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(r.file=this._file),this._sourceRoot!=null&&(r.sourceRoot=this._sourceRoot),this._sourcesContents&&(r.sourcesContent=this._generateSourcesContent(r.sources,r.sourceRoot)),r},u.prototype.toString=function(){return JSON.stringify(this.toJSON())},je.SourceMapGenerator=u,je}var se={},Je={},Bt;function Nn(){return Bt||(Bt=1,(function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(i,f,u,n,r,c){var a=Math.floor((f-i)/2)+i,h=r(u,n[a],!0);return h===0?a:h>0?f-a>1?e(a,f,u,n,r,c):c==t.LEAST_UPPER_BOUND?f<n.length?f:-1:a:a-i>1?e(i,a,u,n,r,c):c==t.LEAST_UPPER_BOUND?a:i<0?-1:i}t.search=function(f,u,n,r){if(u.length===0)return-1;var c=e(-1,u.length,f,u,n,r||t.GREATEST_LOWER_BOUND);if(c<0)return-1;for(;c-1>=0&&n(u[c],u[c-1],!0)===0;)--c;return c}})(Je)),Je}var Ke={},qt;function Tn(){if(qt)return Ke;qt=1;function t(f,u,n){var r=f[u];f[u]=f[n],f[n]=r}function e(f,u){return Math.round(f+Math.random()*(u-f))}function i(f,u,n,r){if(n<r){var c=e(n,r),a=n-1;t(f,c,r);for(var h=f[r],p=n;p<r;p++)u(f[p],h)<=0&&(a+=1,t(f,a,p));t(f,a+1,p);var d=a+1;i(f,u,n,d-1),i(f,u,d+1,r)}}return Ke.quickSort=function(f,u){i(f,u,0,f.length-1)},Ke}var Ut;function Bn(){if(Ut)return se;Ut=1;var t=oe(),e=Nn(),i=$t().ArraySet,f=Xt(),u=Tn().quickSort;function n(h,p){var d=h;return typeof h=="string"&&(d=t.parseSourceMapInput(h)),d.sections!=null?new a(d,p):new r(d,p)}n.fromSourceMap=function(h,p){return r.fromSourceMap(h,p)},n.prototype._version=3,n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),n.prototype._charIsMappingSeparator=function(p,d){var l=p.charAt(d);return l===";"||l===","},n.prototype._parseMappings=function(p,d){throw new Error("Subclasses must implement _parseMappings")},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.prototype.eachMapping=function(p,d,l){var o=d||null,s=l||n.GENERATED_ORDER,m;switch(s){case n.GENERATED_ORDER:m=this._generatedMappings;break;case n.ORIGINAL_ORDER:m=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var g=this.sourceRoot;m.map(function(_){var y=_.source===null?null:this._sources.at(_.source);return y=t.computeSourceURL(g,y,this._sourceMapURL),{source:y,generatedLine:_.generatedLine,generatedColumn:_.generatedColumn,originalLine:_.originalLine,originalColumn:_.originalColumn,name:_.name===null?null:this._names.at(_.name)}},this).forEach(p,o)},n.prototype.allGeneratedPositionsFor=function(p){var d=t.getArg(p,"line"),l={source:t.getArg(p,"source"),originalLine:d,originalColumn:t.getArg(p,"column",0)};if(l.source=this._findSourceIndex(l.source),l.source<0)return[];var o=[],s=this._findMapping(l,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(s>=0){var m=this._originalMappings[s];if(p.column===void 0)for(var g=m.originalLine;m&&m.originalLine===g;)o.push({line:t.getArg(m,"generatedLine",null),column:t.getArg(m,"generatedColumn",null),lastColumn:t.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++s];else for(var _=m.originalColumn;m&&m.originalLine===d&&m.originalColumn==_;)o.push({line:t.getArg(m,"generatedLine",null),column:t.getArg(m,"generatedColumn",null),lastColumn:t.getArg(m,"lastGeneratedColumn",null)}),m=this._originalMappings[++s]}return o},se.SourceMapConsumer=n;function r(h,p){var d=h;typeof h=="string"&&(d=t.parseSourceMapInput(h));var l=t.getArg(d,"version"),o=t.getArg(d,"sources"),s=t.getArg(d,"names",[]),m=t.getArg(d,"sourceRoot",null),g=t.getArg(d,"sourcesContent",null),_=t.getArg(d,"mappings"),y=t.getArg(d,"file",null);if(l!=this._version)throw new Error("Unsupported version: "+l);m&&(m=t.normalize(m)),o=o.map(String).map(t.normalize).map(function(k){return m&&t.isAbsolute(m)&&t.isAbsolute(k)?t.relative(m,k):k}),this._names=i.fromArray(s.map(String),!0),this._sources=i.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(k){return t.computeSourceURL(m,k,p)}),this.sourceRoot=m,this.sourcesContent=g,this._mappings=_,this._sourceMapURL=p,this.file=y}r.prototype=Object.create(n.prototype),r.prototype.consumer=n,r.prototype._findSourceIndex=function(h){var p=h;if(this.sourceRoot!=null&&(p=t.relative(this.sourceRoot,p)),this._sources.has(p))return this._sources.indexOf(p);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==h)return d;return-1},r.fromSourceMap=function(p,d){var l=Object.create(r.prototype),o=l._names=i.fromArray(p._names.toArray(),!0),s=l._sources=i.fromArray(p._sources.toArray(),!0);l.sourceRoot=p._sourceRoot,l.sourcesContent=p._generateSourcesContent(l._sources.toArray(),l.sourceRoot),l.file=p._file,l._sourceMapURL=d,l._absoluteSources=l._sources.toArray().map(function(C){return t.computeSourceURL(l.sourceRoot,C,d)});for(var m=p._mappings.toArray().slice(),g=l.__generatedMappings=[],_=l.__originalMappings=[],y=0,k=m.length;y<k;y++){var v=m[y],b=new c;b.generatedLine=v.generatedLine,b.generatedColumn=v.generatedColumn,v.source&&(b.source=s.indexOf(v.source),b.originalLine=v.originalLine,b.originalColumn=v.originalColumn,v.name&&(b.name=o.indexOf(v.name)),_.push(b)),g.push(b)}return u(l.__originalMappings,t.compareByOriginalPositions),l},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function c(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}r.prototype._parseMappings=function(p,d){for(var l=1,o=0,s=0,m=0,g=0,_=0,y=p.length,k=0,v={},b={},C=[],P=[],E,M,w,S,x;k<y;)if(p.charAt(k)===";")l++,k++,o=0;else if(p.charAt(k)===",")k++;else{for(E=new c,E.generatedLine=l,S=k;S<y&&!this._charIsMappingSeparator(p,S);S++);if(M=p.slice(k,S),w=v[M],w)k+=M.length;else{for(w=[];k<S;)f.decode(p,k,b),x=b.value,k=b.rest,w.push(x);if(w.length===2)throw new Error("Found a source, but no line and column");if(w.length===3)throw new Error("Found a source and line, but no column");v[M]=w}E.generatedColumn=o+w[0],o=E.generatedColumn,w.length>1&&(E.source=g+w[1],g+=w[1],E.originalLine=s+w[2],s=E.originalLine,E.originalLine+=1,E.originalColumn=m+w[3],m=E.originalColumn,w.length>4&&(E.name=_+w[4],_+=w[4])),P.push(E),typeof E.originalLine=="number"&&C.push(E)}u(P,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=P,u(C,t.compareByOriginalPositions),this.__originalMappings=C},r.prototype._findMapping=function(p,d,l,o,s,m){if(p[l]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+p[l]);if(p[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+p[o]);return e.search(p,d,s,m)},r.prototype.computeColumnSpans=function(){for(var p=0;p<this._generatedMappings.length;++p){var d=this._generatedMappings[p];if(p+1<this._generatedMappings.length){var l=this._generatedMappings[p+1];if(d.generatedLine===l.generatedLine){d.lastGeneratedColumn=l.generatedColumn-1;continue}}d.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(p){var d={generatedLine:t.getArg(p,"line"),generatedColumn:t.getArg(p,"column")},l=this._findMapping(d,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(p,"bias",n.GREATEST_LOWER_BOUND));if(l>=0){var o=this._generatedMappings[l];if(o.generatedLine===d.generatedLine){var s=t.getArg(o,"source",null);s!==null&&(s=this._sources.at(s),s=t.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var m=t.getArg(o,"name",null);return m!==null&&(m=this._names.at(m)),{source:s,line:t.getArg(o,"originalLine",null),column:t.getArg(o,"originalColumn",null),name:m}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(p){return p==null}):!1},r.prototype.sourceContentFor=function(p,d){if(!this.sourcesContent)return null;var l=this._findSourceIndex(p);if(l>=0)return this.sourcesContent[l];var o=p;this.sourceRoot!=null&&(o=t.relative(this.sourceRoot,o));var s;if(this.sourceRoot!=null&&(s=t.urlParse(this.sourceRoot))){var m=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(m))return this.sourcesContent[this._sources.indexOf(m)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(d)return null;throw new Error('"'+o+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(p){var d=t.getArg(p,"source");if(d=this._findSourceIndex(d),d<0)return{line:null,column:null,lastColumn:null};var l={source:d,originalLine:t.getArg(p,"line"),originalColumn:t.getArg(p,"column")},o=this._findMapping(l,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(p,"bias",n.GREATEST_LOWER_BOUND));if(o>=0){var s=this._originalMappings[o];if(s.source===l.source)return{line:t.getArg(s,"generatedLine",null),column:t.getArg(s,"generatedColumn",null),lastColumn:t.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},se.BasicSourceMapConsumer=r;function a(h,p){var d=h;typeof h=="string"&&(d=t.parseSourceMapInput(h));var l=t.getArg(d,"version"),o=t.getArg(d,"sections");if(l!=this._version)throw new Error("Unsupported version: "+l);this._sources=new i,this._names=new i;var s={line:-1,column:0};this._sections=o.map(function(m){if(m.url)throw new Error("Support for url field in sections not implemented.");var g=t.getArg(m,"offset"),_=t.getArg(g,"line"),y=t.getArg(g,"column");if(_<s.line||_===s.line&&y<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=g,{generatedOffset:{generatedLine:_+1,generatedColumn:y+1},consumer:new n(t.getArg(m,"map"),p)}})}return a.prototype=Object.create(n.prototype),a.prototype.constructor=n,a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){for(var h=[],p=0;p<this._sections.length;p++)for(var d=0;d<this._sections[p].consumer.sources.length;d++)h.push(this._sections[p].consumer.sources[d]);return h}}),a.prototype.originalPositionFor=function(p){var d={generatedLine:t.getArg(p,"line"),generatedColumn:t.getArg(p,"column")},l=e.search(d,this._sections,function(s,m){var g=s.generatedLine-m.generatedOffset.generatedLine;return g||s.generatedColumn-m.generatedOffset.generatedColumn}),o=this._sections[l];return o?o.consumer.originalPositionFor({line:d.generatedLine-(o.generatedOffset.generatedLine-1),column:d.generatedColumn-(o.generatedOffset.generatedLine===d.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:p.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(p){return p.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(p,d){for(var l=0;l<this._sections.length;l++){var o=this._sections[l],s=o.consumer.sourceContentFor(p,!0);if(s)return s}if(d)return null;throw new Error('"'+p+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(p){for(var d=0;d<this._sections.length;d++){var l=this._sections[d];if(l.consumer._findSourceIndex(t.getArg(p,"source"))!==-1){var o=l.consumer.generatedPositionFor(p);if(o){var s={line:o.line+(l.generatedOffset.generatedLine-1),column:o.column+(l.generatedOffset.generatedLine===o.line?l.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},a.prototype._parseMappings=function(p,d){this.__generatedMappings=[],this.__originalMappings=[];for(var l=0;l<this._sections.length;l++)for(var o=this._sections[l],s=o.consumer._generatedMappings,m=0;m<s.length;m++){var g=s[m],_=o.consumer._sources.at(g.source);_=t.computeSourceURL(o.consumer.sourceRoot,_,this._sourceMapURL),this._sources.add(_),_=this._sources.indexOf(_);var y=null;g.name&&(y=o.consumer._names.at(g.name),this._names.add(y),y=this._names.indexOf(y));var k={source:_,generatedLine:g.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:g.generatedColumn+(o.generatedOffset.generatedLine===g.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:g.originalLine,originalColumn:g.originalColumn,name:y};this.__generatedMappings.push(k),typeof k.originalLine=="number"&&this.__originalMappings.push(k)}u(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),u(this.__originalMappings,t.compareByOriginalPositions)},se.IndexedSourceMapConsumer=a,se}var Ye={},Ht;function qn(){if(Ht)return Ye;Ht=1;var t=en().SourceMapGenerator,e=oe(),i=/(\r?\n)/,f=10,u="$$$isSourceNode$$$";function n(r,c,a,h,p){this.children=[],this.sourceContents={},this.line=r??null,this.column=c??null,this.source=a??null,this.name=p??null,this[u]=!0,h!=null&&this.add(h)}return n.fromStringWithSourceMap=function(c,a,h){var p=new n,d=c.split(i),l=0,o=function(){var y=v(),k=v()||"";return y+k;function v(){return l<d.length?d[l++]:void 0}},s=1,m=0,g=null;return a.eachMapping(function(y){if(g!==null)if(s<y.generatedLine)_(g,o()),s++,m=0;else{var k=d[l]||"",v=k.substr(0,y.generatedColumn-m);d[l]=k.substr(y.generatedColumn-m),m=y.generatedColumn,_(g,v),g=y;return}for(;s<y.generatedLine;)p.add(o()),s++;if(m<y.generatedColumn){var k=d[l]||"";p.add(k.substr(0,y.generatedColumn)),d[l]=k.substr(y.generatedColumn),m=y.generatedColumn}g=y},this),l<d.length&&(g&&_(g,o()),p.add(d.splice(l).join(""))),a.sources.forEach(function(y){var k=a.sourceContentFor(y);k!=null&&(h!=null&&(y=e.join(h,y)),p.setSourceContent(y,k))}),p;function _(y,k){if(y===null||y.source===void 0)p.add(k);else{var v=h?e.join(h,y.source):y.source;p.add(new n(y.originalLine,y.originalColumn,v,k,y.name))}}},n.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(a){this.add(a)},this);else if(c[u]||typeof c=="string")c&&this.children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},n.prototype.prepend=function(c){if(Array.isArray(c))for(var a=c.length-1;a>=0;a--)this.prepend(c[a]);else if(c[u]||typeof c=="string")this.children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},n.prototype.walk=function(c){for(var a,h=0,p=this.children.length;h<p;h++)a=this.children[h],a[u]?a.walk(c):a!==""&&c(a,{source:this.source,line:this.line,column:this.column,name:this.name})},n.prototype.join=function(c){var a,h,p=this.children.length;if(p>0){for(a=[],h=0;h<p-1;h++)a.push(this.children[h]),a.push(c);a.push(this.children[h]),this.children=a}return this},n.prototype.replaceRight=function(c,a){var h=this.children[this.children.length-1];return h[u]?h.replaceRight(c,a):typeof h=="string"?this.children[this.children.length-1]=h.replace(c,a):this.children.push("".replace(c,a)),this},n.prototype.setSourceContent=function(c,a){this.sourceContents[e.toSetString(c)]=a},n.prototype.walkSourceContents=function(c){for(var a=0,h=this.children.length;a<h;a++)this.children[a][u]&&this.children[a].walkSourceContents(c);for(var p=Object.keys(this.sourceContents),a=0,h=p.length;a<h;a++)c(e.fromSetString(p[a]),this.sourceContents[p[a]])},n.prototype.toString=function(){var c="";return this.walk(function(a){c+=a}),c},n.prototype.toStringWithSourceMap=function(c){var a={code:"",line:1,column:0},h=new t(c),p=!1,d=null,l=null,o=null,s=null;return this.walk(function(m,g){a.code+=m,g.source!==null&&g.line!==null&&g.column!==null?((d!==g.source||l!==g.line||o!==g.column||s!==g.name)&&h.addMapping({source:g.source,original:{line:g.line,column:g.column},generated:{line:a.line,column:a.column},name:g.name}),d=g.source,l=g.line,o=g.column,s=g.name,p=!0):p&&(h.addMapping({generated:{line:a.line,column:a.column}}),d=null,p=!1);for(var _=0,y=m.length;_<y;_++)m.charCodeAt(_)===f?(a.line++,a.column=0,_+1===y?(d=null,p=!1):p&&h.addMapping({source:g.source,original:{line:g.line,column:g.column},generated:{line:a.line,column:a.column},name:g.name})):a.column++}),this.walkSourceContents(function(m,g){h.setSourceContent(m,g)}),{code:a.code,map:h}},Ye.SourceNode=n,Ye}var Vt;function Un(){return Vt||(Vt=1,re.SourceMapGenerator=en().SourceMapGenerator,re.SourceMapConsumer=Bn().SourceMapConsumer,re.SourceNode=qn().SourceNode),re}var Ft;function Hn(){return Ft||(Ft=1,(function(t,e){e.__esModule=!0;var i=H(),f=void 0;try{var u=Un();f=u.SourceNode}catch{}f||(f=function(c,a,h,p){this.src="",p&&this.add(p)},f.prototype={add:function(a){i.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){i.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function n(c,a,h){if(i.isArray(c)){for(var p=[],d=0,l=c.length;d<l;d++)p.push(a.wrap(c[d],h));return p}else if(typeof c=="boolean"||typeof c=="number")return c+"";return c}function r(c){this.srcFile=c,this.source=[]}r.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,h){this.source.unshift(this.wrap(a,h))},push:function(a,h){this.source.push(this.wrap(a,h))},merge:function(){var a=this.empty();return this.each(function(h){a.add(["  ",h,`
`])}),a},each:function(a){for(var h=0,p=this.source.length;h<p;h++)a(this.source[h])},empty:function(){var a=this.currentLocation||{start:{}};return new f(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var h=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return a instanceof f?a:(a=n(a,this,h),new f(h.start.line,h.start.column,this.srcFile,a))},functionCall:function(a,h,p){return p=this.generateList(p),this.wrap([a,h?"."+h+"(":"(",p,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var h=this,p=[];Object.keys(a).forEach(function(l){var o=n(a[l],h);o!=="undefined"&&p.push([h.quotedString(l),":",o])});var d=this.generateList(p);return d.prepend("{"),d.add("}"),d},generateList:function(a){for(var h=this.empty(),p=0,d=a.length;p<d;p++)p&&h.add(","),h.add(n(a[p],this));return h},generateArray:function(a){var h=this.generateList(a);return h.prepend("["),h.add("]"),h}},e.default=r,t.exports=e.default})(Ie,Ie.exports)),Ie.exports}var Gt;function Vn(){return Gt||(Gt=1,(function(t,e){e.__esModule=!0;function i(l){return l&&l.__esModule?l:{default:l}}var f=tt(),u=Z(),n=i(u),r=H(),c=Hn(),a=i(c);function h(l){this.value=l}function p(){}p.prototype={nameLookup:function(o,s){return this.internalNameLookup(o,s)},depthedLookup:function(o){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(o),")"]},compilerInfo:function(){var o=f.COMPILER_REVISION,s=f.REVISION_CHANGES[o];return[o,s]},appendToBuffer:function(o,s,m){return r.isArray(o)||(o=[o]),o=this.source.wrap(o,s),this.environment.isSimple?["return ",o,";"]:m?["buffer += ",o,";"]:(o.appendToBuffer=!0,o)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(o,s){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",o,",",JSON.stringify(s),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(o,s,m,g){this.environment=o,this.options=s,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!g,this.name=this.environment.name,this.isChild=!!m,this.context=m||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(o,s),this.useDepths=this.useDepths||o.useDepths||o.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||o.useBlockParams;var _=o.opcodes,y=void 0,k=void 0,v=void 0,b=void 0;for(v=0,b=_.length;v<b;v++)y=_[v],this.source.currentLocation=y.loc,k=k||y.loc,this[y.opcode].apply(this,y.args);if(this.source.currentLocation=k,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new n.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),g?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var C=this.createFunctionContext(g);if(this.isChild)return C;var P={compiler:this.compilerInfo(),main:C};this.decorators&&(P.main_d=this.decorators,P.useDecorators=!0);var E=this.context,M=E.programs,w=E.decorators;for(v=0,b=M.length;v<b;v++)M[v]&&(P[v]=M[v],w[v]&&(P[v+"_d"]=w[v],P.useDecorators=!0));return this.environment.usePartial&&(P.usePartial=!0),this.options.data&&(P.useData=!0),this.useDepths&&(P.useDepths=!0),this.useBlockParams&&(P.useBlockParams=!0),this.options.compat&&(P.compat=!0),g?P.compilerOptions=this.options:(P.compiler=JSON.stringify(P.compiler),this.source.currentLocation={start:{line:1,column:0}},P=this.objectLiteral(P),s.srcName?(P=P.toStringWithSourceMap({file:s.destName}),P.map=P.map&&P.map.toString()):P=P.toString()),P},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(o){var s=this,m="",g=this.stackVars.concat(this.registers.list);g.length>0&&(m+=", "+g.join(", "));var _=0;Object.keys(this.aliases).forEach(function(v){var b=s.aliases[v];b.children&&b.referenceCount>1&&(m+=", alias"+ ++_+"="+v,b.children[0]="alias"+_)}),this.lookupPropertyFunctionIsUsed&&(m+=", "+this.lookupPropertyFunctionVarDeclaration());var y=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&y.push("blockParams"),this.useDepths&&y.push("depths");var k=this.mergeSource(m);return o?(y.push(k),Function.apply(this,y)):this.source.wrap(["function(",y.join(","),`) {
  `,k,"}"])},mergeSource:function(o){var s=this.environment.isSimple,m=!this.forceBuffer,g=void 0,_=void 0,y=void 0,k=void 0;return this.source.each(function(v){v.appendToBuffer?(y?v.prepend("  + "):y=v,k=v):(y&&(_?y.prepend("buffer += "):g=!0,k.add(";"),y=k=void 0),_=!0,s||(m=!1))}),m?y?(y.prepend("return "),k.add(";")):_||this.source.push('return "";'):(o+=", buffer = "+(g?"":this.initializeBuffer()),y?(y.prepend("return buffer + "),k.add(";")):this.source.push("return buffer;")),o&&this.source.prepend("var "+o.substring(2)+(g?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(o){var s=this.aliasable("container.hooks.blockHelperMissing"),m=[this.contextName(0)];this.setupHelperArgs(o,0,m);var g=this.popStack();m.splice(1,0,g),this.push(this.source.functionCall(s,"call",m))},ambiguousBlockValue:function(){var o=this.aliasable("container.hooks.blockHelperMissing"),s=[this.contextName(0)];this.setupHelperArgs("",0,s,!0),this.flushInline();var m=this.topStack();s.splice(1,0,m),this.pushSource(["if (!",this.lastHelper,") { ",m," = ",this.source.functionCall(o,"call",s),"}"])},appendContent:function(o){this.pendingContent?o=this.pendingContent+o:this.pendingLocation=this.source.currentLocation,this.pendingContent=o},append:function(){if(this.isInline())this.replaceStack(function(s){return[" != null ? ",s,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var o=this.popStack();this.pushSource(["if (",o," != null) { ",this.appendToBuffer(o,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(o){this.lastContext=o},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(o,s,m,g){var _=0;!g&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(o[_++])):this.pushContext(),this.resolvePath("context",o,_,s,m)},lookupBlockParam:function(o,s){this.useBlockParams=!0,this.push(["blockParams[",o[0],"][",o[1],"]"]),this.resolvePath("context",s,1)},lookupData:function(o,s,m){o?this.pushStackLiteral("container.data(data, "+o+")"):this.pushStackLiteral("data"),this.resolvePath("data",s,0,!0,m)},resolvePath:function(o,s,m,g,_){var y=this;if(this.options.strict||this.options.assumeObjects){this.push(d(this.options.strict&&_,this,s,m,o));return}for(var k=s.length;m<k;m++)this.replaceStack(function(v){var b=y.nameLookup(v,s[m],o);return g?[" && ",b]:[" != null ? ",b," : ",v]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(o,s){this.pushContext(),this.pushString(s),s!=="SubExpression"&&(typeof o=="string"?this.pushString(o):this.pushStackLiteral(o))},emptyHash:function(o){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(o?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var o=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(o.ids)),this.stringParams&&(this.push(this.objectLiteral(o.contexts)),this.push(this.objectLiteral(o.types))),this.push(this.objectLiteral(o.values))},pushString:function(o){this.pushStackLiteral(this.quotedString(o))},pushLiteral:function(o){this.pushStackLiteral(o)},pushProgram:function(o){o!=null?this.pushStackLiteral(this.programExpression(o)):this.pushStackLiteral(null)},registerDecorator:function(o,s){var m=this.nameLookup("decorators",s,"decorator"),g=this.setupHelperArgs(s,o);this.decorators.push(["fn = ",this.decorators.functionCall(m,"",["fn","props","container",g])," || fn;"])},invokeHelper:function(o,s,m){var g=this.popStack(),_=this.setupHelper(o,s),y=[];m&&y.push(_.name),y.push(g),this.options.strict||y.push(this.aliasable("container.hooks.helperMissing"));var k=["(",this.itemsSeparatedBy(y,"||"),")"],v=this.source.functionCall(k,"call",_.callParams);this.push(v)},itemsSeparatedBy:function(o,s){var m=[];m.push(o[0]);for(var g=1;g<o.length;g++)m.push(s,o[g]);return m},invokeKnownHelper:function(o,s){var m=this.setupHelper(o,s);this.push(this.source.functionCall(m.name,"call",m.callParams))},invokeAmbiguous:function(o,s){this.useRegister("helper");var m=this.popStack();this.emptyHash();var g=this.setupHelper(0,o,s),_=this.lastHelper=this.nameLookup("helpers",o,"helper"),y=["(","(helper = ",_," || ",m,")"];this.options.strict||(y[0]="(helper = ",y.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",y,g.paramsInit?["),(",g.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",g.callParams)," : helper))"])},invokePartial:function(o,s,m){var g=[],_=this.setupParams(s,1,g);o&&(s=this.popStack(),delete _.name),m&&(_.indent=JSON.stringify(m)),_.helpers="helpers",_.partials="partials",_.decorators="container.decorators",o?g.unshift(s):g.unshift(this.nameLookup("partials",s,"partial")),this.options.compat&&(_.depths="depths"),_=this.objectLiteral(_),g.push(_),this.push(this.source.functionCall("container.invokePartial","",g))},assignToHash:function(o){var s=this.popStack(),m=void 0,g=void 0,_=void 0;this.trackIds&&(_=this.popStack()),this.stringParams&&(g=this.popStack(),m=this.popStack());var y=this.hash;m&&(y.contexts[o]=m),g&&(y.types[o]=g),_&&(y.ids[o]=_),y.values[o]=s},pushId:function(o,s,m){o==="BlockParam"?this.pushStackLiteral("blockParams["+s[0]+"].path["+s[1]+"]"+(m?" + "+JSON.stringify("."+m):"")):o==="PathExpression"?this.pushString(s):o==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:p,compileChildren:function(o,s){for(var m=o.children,g=void 0,_=void 0,y=0,k=m.length;y<k;y++){g=m[y],_=new this.compiler;var v=this.matchExistingProgram(g);if(v==null){this.context.programs.push("");var b=this.context.programs.length;g.index=b,g.name="program"+b,this.context.programs[b]=_.compile(g,s,this.context,!this.precompile),this.context.decorators[b]=_.decorators,this.context.environments[b]=g,this.useDepths=this.useDepths||_.useDepths,this.useBlockParams=this.useBlockParams||_.useBlockParams,g.useDepths=this.useDepths,g.useBlockParams=this.useBlockParams}else g.index=v.index,g.name="program"+v.index,this.useDepths=this.useDepths||v.useDepths,this.useBlockParams=this.useBlockParams||v.useBlockParams}},matchExistingProgram:function(o){for(var s=0,m=this.context.environments.length;s<m;s++){var g=this.context.environments[s];if(g&&g.equals(o))return g}},programExpression:function(o){var s=this.environment.children[o],m=[s.index,"data",s.blockParams];return(this.useBlockParams||this.useDepths)&&m.push("blockParams"),this.useDepths&&m.push("depths"),"container.program("+m.join(", ")+")"},useRegister:function(o){this.registers[o]||(this.registers[o]=!0,this.registers.list.push(o))},push:function(o){return o instanceof h||(o=this.source.wrap(o)),this.inlineStack.push(o),o},pushStackLiteral:function(o){this.push(new h(o))},pushSource:function(o){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),o&&this.source.push(o)},replaceStack:function(o){var s=["("],m=void 0,g=void 0,_=void 0;if(!this.isInline())throw new n.default("replaceStack on non-inline");var y=this.popStack(!0);if(y instanceof h)m=[y.value],s=["(",m],_=!0;else{g=!0;var k=this.incrStack();s=["((",this.push(k)," = ",y,")"],m=this.topStack()}var v=o.call(this,m);_||this.popStack(),g&&this.stackSlot--,this.push(s.concat(v,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var o=this.inlineStack;this.inlineStack=[];for(var s=0,m=o.length;s<m;s++){var g=o[s];if(g instanceof h)this.compileStack.push(g);else{var _=this.incrStack();this.pushSource([_," = ",g,";"]),this.compileStack.push(_)}}},isInline:function(){return this.inlineStack.length},popStack:function(o){var s=this.isInline(),m=(s?this.inlineStack:this.compileStack).pop();if(!o&&m instanceof h)return m.value;if(!s){if(!this.stackSlot)throw new n.default("Invalid stack pop");this.stackSlot--}return m},topStack:function(){var o=this.isInline()?this.inlineStack:this.compileStack,s=o[o.length-1];return s instanceof h?s.value:s},contextName:function(o){return this.useDepths&&o?"depths["+o+"]":"depth"+o},quotedString:function(o){return this.source.quotedString(o)},objectLiteral:function(o){return this.source.objectLiteral(o)},aliasable:function(o){var s=this.aliases[o];return s?(s.referenceCount++,s):(s=this.aliases[o]=this.source.wrap(o),s.aliasable=!0,s.referenceCount=1,s)},setupHelper:function(o,s,m){var g=[],_=this.setupHelperArgs(s,o,g,m),y=this.nameLookup("helpers",s,"helper"),k=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:g,paramsInit:_,name:y,callParams:[k].concat(g)}},setupParams:function(o,s,m){var g={},_=[],y=[],k=[],v=!m,b=void 0;v&&(m=[]),g.name=this.quotedString(o),g.hash=this.popStack(),this.trackIds&&(g.hashIds=this.popStack()),this.stringParams&&(g.hashTypes=this.popStack(),g.hashContexts=this.popStack());var C=this.popStack(),P=this.popStack();(P||C)&&(g.fn=P||"container.noop",g.inverse=C||"container.noop");for(var E=s;E--;)b=this.popStack(),m[E]=b,this.trackIds&&(k[E]=this.popStack()),this.stringParams&&(y[E]=this.popStack(),_[E]=this.popStack());return v&&(g.args=this.source.generateArray(m)),this.trackIds&&(g.ids=this.source.generateArray(k)),this.stringParams&&(g.types=this.source.generateArray(y),g.contexts=this.source.generateArray(_)),this.options.data&&(g.data="data"),this.useBlockParams&&(g.blockParams="blockParams"),g},setupHelperArgs:function(o,s,m,g){var _=this.setupParams(o,s,m);return _.loc=JSON.stringify(this.source.currentLocation),_=this.objectLiteral(_),g?(this.useRegister("options"),m.push("options"),["options=",_]):m?(m.push(_),""):_}},(function(){for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),o=p.RESERVED_WORDS={},s=0,m=l.length;s<m;s++)o[l[s]]=!0})(),p.isValidJavaScriptVariableName=function(l){return!p.RESERVED_WORDS[l]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(l)};function d(l,o,s,m,g){var _=o.popStack(),y=s.length;for(l&&y--;m<y;m++)_=o.nameLookup(_,s[m],g);return l?[o.aliasable("container.strict"),"(",_,", ",o.quotedString(s[m]),", ",JSON.stringify(o.source.currentLocation)," )"]:_}e.default=p,t.exports=e.default})(Ae,Ae.exports)),Ae.exports}var Wt;function Fn(){return Wt||(Wt=1,(function(t,e){e.__esModule=!0;function i(y){return y&&y.__esModule?y:{default:y}}var f=xn(),u=i(f),n=Kt(),r=i(n),c=An(),a=In(),h=Vn(),p=i(h),d=Yt(),l=i(d),o=Jt(),s=i(o),m=u.default.create;function g(){var y=m();return y.compile=function(k,v){return a.compile(k,v,y)},y.precompile=function(k,v){return a.precompile(k,v,y)},y.AST=r.default,y.Compiler=a.Compiler,y.JavaScriptCompiler=p.default,y.Parser=c.parser,y.parse=c.parse,y.parseWithoutProcessing=c.parseWithoutProcessing,y}var _=g();_.create=g,s.default(_),_.Visitor=l.default,_.default=_,e.default=_,t.exports=e.default})(ce,ce.exports)),ce.exports}var Gn=Fn();const I=fn(Gn),Wn=I.template({1:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`    <h4 class="modal__error-title">Ошибка</h4>
    <div class="modal__error-message">`+t.escapeExpression((n=(n=r(i,"errorMessage")||(e!=null?r(e,"errorMessage"):e))!=null?n:t.hooks.helperMissing,typeof n=="function"?n.call(e??(t.nullContext||{}),{name:"errorMessage",hash:{},data:u,loc:{start:{line:4,column:38},end:{line:4,column:54}}}):n))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return'<div class="modal '+p((r=(r=d(i,"visibility")||(e!=null?d(e,"visibility"):e))!=null?r:a,typeof r===h?r.call(c,{name:"visibility",hash:{},data:u,loc:{start:{line:1,column:18},end:{line:1,column:32}}}):r))+" "+p((r=(r=d(i,"modalClassName")||(e!=null?d(e,"modalClassName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"modalClassName",hash:{},data:u,loc:{start:{line:1,column:33},end:{line:1,column:51}}}):r))+`">
`+((n=d(i,"if").call(c,e!=null?d(e,"errorMessage"):e,{name:"if",hash:{},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:2,column:2},end:{line:5,column:9}}}))!=null?n:"")+`</div>


`},useData:!0});class tn extends O{constructor(e){super({...e})}render(){return this.compile(Wn,this.props)}}function D(t){const e=new tn({visibility:"visible",modalClassName:"modal__error modal_min modal_min-top-right",errorMessage:t}),i=document.querySelector("#app");let f=null;i&&(f=e.getContent(),f?i.appendChild(f):console.error("Ошибка: не удалось получить содержимое модального окна.")),setTimeout(()=>{e.setProps({visibility:"hidden"}),f&&f.parentNode&&f.parentNode.removeChild(f)},5e3)}const ie={GET:"GET",PUT:"PUT",POST:"POST",DELETE:"DELETE"};function jn(t){return Object.entries(t).map(([i,f])=>Array.isArray(f)?`${encodeURIComponent(i)}=${encodeURIComponent(f.join(","))}`:typeof f=="object"&&f!==null?`${encodeURIComponent(i)}=${encodeURIComponent("[object Object]")}`:`${encodeURIComponent(i)}=${encodeURIComponent(String(f))}`).join("&")}class nt{static API_URL="https://ya-praktikum.tech/api/v2";endpoint;constructor(e){this.endpoint=`${nt.API_URL}${e}`}request(e,i,f=5e3){return new Promise((u,n)=>{const r=new XMLHttpRequest;r.open(i.method,e),i.headers&&Object.entries(i.headers).forEach(([c,a])=>{r.setRequestHeader(c,a)}),r.onload=function(){r.status>=200&&r.status<300?u(r.response):r.status===400?n(r.response):n(new Error(`Request failed with status ${r.status}: ${r.statusText}`))},r.onerror=function(){n(new Error(`Request failed with status ${r.status}`)),D(`Request failed with status ${r.status}`)},r.timeout=f,r.withCredentials=!0,r.responseType="json",r.ontimeout=function(){n(new Error("Request timed out"))},i.method===ie.GET?r.send():i.data instanceof FormData?r.send(i.data):(r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(i.data)))})}get(e,i){let f="";return i?.data&&(f+=`?${jn(i.data)}`),this.request(this.endpoint+`${e}${f}`,{...i,method:ie.GET})}put(e="/",i){return this.request(this.endpoint+e,{data:i,method:ie.PUT})}post(e="/",i){return this.request(this.endpoint+e,{data:i,method:ie.POST})}delete(e="/",i){return this.request(this.endpoint+e,{data:i,method:ie.DELETE})}}class Fe{http;constructor(e){this.http=new nt(e)}}class zn extends Fe{constructor(){super("/chats")}create(e){return this.http.post("/",{title:e})}delete(e){return this.http.delete("/",{chatId:e})}read(){return this.http.get("/")}getUsers(e){return this.http.get(`/${e}/users`)}addUsers(e,i){return this.http.put("/users",{users:i,chatId:e})}deleteUsers(e,i){return this.http.delete("/users",{users:i,chatId:e})}addChatAvatar(e){return this.http.put("/avatar",e)}async getToken(e){return(await this.http.post(`/token/${e}`,{})).token}update=void 0;request=void 0}const Zn=new zn;function Qn(t,e,i){if(typeof e!="string")throw new Error("path must be string");if(typeof t!="object"||t===null)return t;const f=e.split(".");let u=t;for(let n=0;n<f.length;n++){const r=f[n];n===f.length-1?u[r]=i:(r in u||(u[r]={}),u=u[r])}return t}function nn(t,e){if(t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const i=Object.keys(t),f=Object.keys(e);if(i.length!==f.length)return!1;for(const u of i)if(!f.includes(u)||!nn(t[u],e[u]))return!1;return!0}class Jn extends et{state={};constructor(){super()}getState(){return this.state}set(e,i){Qn(this.state,e,i),this.emit("updated")}isUserAuthorized(){return!!this.state.user}}function Ge(t){return function(e){return class extends e{constructor(i){let f=t(A.getState());super({...i,...f}),A.on("updated",()=>{const u=t(A.getState());nn(f,u)||this.setProps({...u}),f=u})}}}}const A=new Jn;var qe=(t=>(t.Connected="connected",t.Error="error",t.Message="message",t.Close="close",t))(qe||{});class Kn extends et{constructor(e){super(),this.url=e}socket=null;pingInterval=0;get readyState(){return this.socket?.readyState}send(e){if(!this.socket)throw new Error("Socket is not connected");this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}connect(){return this.socket=new WebSocket(this.url),this.subscribe(this.socket),this.setupPing(),new Promise(e=>{this.on("connected",()=>{e()})})}close(){this.socket?.close()}setupPing(){this.pingInterval=setInterval(()=>{this.send({type:"ping"})},5e3),this.on("close",()=>{clearInterval(this.pingInterval),this.pingInterval=0})}subscribe(e){e.addEventListener("open",()=>{this.emit("connected")}),e.addEventListener("close",()=>{this.emit("close")}),e.addEventListener("error",i=>{this.emit("error",i)}),e.addEventListener("message",i=>{try{const f=JSON.parse(i.data);if(f.type&&f.type==="pong")return;this.emit("message",f)}catch{}})}}function Yn(t){return t.map((e,i,f)=>{const u=new Date(e.time).toDateString(),n=i>0?new Date(f[i-1].time).toDateString():null;return i===0||u!==n?{...e,showDate:!0}:{...e,showDate:!1}})}class Xn{sockets=new Map;async connect(e,i){try{if(this.sockets.has(e))return;const f=A.getState().user.id,u=new Kn(`wss://ya-praktikum.tech/ws/chats/${f}/${e}/${i}`);this.sockets.set(e,u),await u.connect(),this.subscribe(u,e),this.fetchOldMessages(e)}catch(f){console.error("Failed to connect to chat",f)}}sendMessage(e,i){try{const f=this.sockets.get(e);if(!f)throw new Error(`Chat ${e} is not connected`);if(f.readyState===WebSocket.CONNECTING){this.waitForSocketConnection(f).then(()=>{i.length>0&&f.send({type:"message",content:i})});return}if(f.readyState!==WebSocket.OPEN)return;f.send({type:"message",content:i})}catch{}}async fetchOldMessages(e){try{const i=this.sockets.get(e);if(!i)throw new Error(`Chat ${e} is not connected`);i.readyState===WebSocket.CONNECTING&&await this.waitForSocketConnection(i),i.readyState===WebSocket.OPEN&&i.send({type:"get old",content:"0"})}catch{}}waitForSocketConnection(e){return new Promise(i=>{const f=setInterval(()=>{e.readyState===WebSocket.OPEN&&(clearInterval(f),i())},100)})}closeAll(){try{Array.from(this.sockets.values()).forEach(e=>e.close())}catch{}}onMessage(e,i){try{let f=[];Array.isArray(i)?i.length===0||(f=i.reverse()):i&&f.push(i);const u=A.getState().messages[e]||[],n=f.filter(a=>!u.some(h=>h.id===a.id));if(n.length>0){const a=[...u,...n],h=Yn(a);A.set(`messages.${e}`,h)}const c=A.getState().chats.map(a=>{if(a.id===e){const h=f.reduce((p,d)=>new Date(p.time)>new Date(d.time)?p:d);return{...a,last_message:{user:{id:h.user_id},content:h.content,time:h.time}}}return a});A.set("chats",c)}catch{}}onClose(e){try{this.sockets.delete(e),W.getToken(e).then(i=>{i&&this.connect(e,i)})}catch{}}subscribe(e,i){try{e.on(qe.Message,f=>{try{const u=typeof f=="string"?JSON.parse(f):f;Array.isArray(u)?this.onMessage(i,u):u&&this.onMessage(i,u)}catch{}}),e.on(qe.Close,()=>this.onClose(i)),e.on(qe.Error,()=>{})}catch{}}}const $e=new Xn;class $n{api;sockets;constructor(){this.api=Zn,this.sockets=new Map}async create(e){try{await this.api.create(e),this.fetchChats()}catch{}}async fetchChats(){try{const e=await this.api.read();Array.isArray(e)&&(e.map(async i=>{const f=await this.getToken(i.id);f&&(await $e.connect(i.id,f),await this.fetchLastMessage(i.id))}),A.set("chats",e),console.log("chats",e))}catch{}}async fetchLastMessage(e){try{const i=this.sockets.get(e);if(!i)throw new Error(`Чат ${e} не соединен`);i.readyState===WebSocket.OPEN?i.send(JSON.stringify({type:"get old",content:"1"})):console.error("WebSocket не открыт:",i.readyState)}catch{}}addUserToChat(e,i){try{this.api.addUsers(e,[i])}catch{}}async deleteUserFromChat(e,i){try{await this.api.deleteUsers(e,[i])}catch(f){throw D(`${f}`),new Error(`Ошибка при удалении пользователя из чата: ${f}`)}}async delete(e){try{await this.api.delete(e),this.fetchChats()}catch{}}async getToken(e){try{return await this.api.getToken(e)}catch{return}}selectChat(e){const i=A.getState().messages||{};i[e]||(i[e]=[],A.set("messages",i)),A.set("selectedChat",e),$e.fetchOldMessages(e)}async getUsers(e){try{return await this.api.getUsers(e)}catch{return[]}}async addChatAvatar(e){try{await this.api.addChatAvatar(e)}catch(i){D(`Ошибка при добавлении аватара: ${i}`)}}}const W=new $n,er=I.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`<div class="main">
  <hr>
<main class="main-page">
  `+((n=(a(i,"LeftPanel")||e&&a(e,"LeftPanel")||c).call(r,{name:"LeftPanel",hash:{changePage:e!=null?a(e,"changePage"):e,chats:e!=null?a(e,"chats"):e},data:u,loc:{start:{line:4,column:2},end:{line:4,column:61}}}))!=null?n:"")+`
  `+((n=(a(i,"RightSide")||e&&a(e,"RightSide")||c).call(r,{name:"RightSide",hash:{changePage:e!=null?a(e,"changePage"):e,messages:e!=null?a(e,"messages"):e},data:u,loc:{start:{line:5,column:2},end:{line:5,column:67}}}))!=null?n:"")+`
</main>
</div>


`},useData:!0});class tr extends O{constructor(e){super({...e,chats:e.chats,messages:e.messages})}init(){W.fetchChats()}render(){return this.compile(er,this.props)}}const nr=t=>({chats:t.chats,messages:t.messages}),rr=Ge(nr)(tr),sr=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.lookupProperty||function(a,h){if(Object.prototype.hasOwnProperty.call(a,h))return a[h]};return`    <h1 class="form__title">Регистрация</h1>
    <div class="form__inputs-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"inputs"):e,{name:"each",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:5,column:6},end:{line:15,column:15}}}))!=null?n:"")+`    </div>
    <div class="form__buttons-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"buttons"):e,{name:"each",hash:{},fn:t.program(4,u,0),inverse:t.noop,data:u,loc:{start:{line:18,column:6},end:{line:25,column:15}}}))!=null?n:"")+`    </div>
`},2:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"        "+((n=(r(i,"Input")||e&&r(e,"Input")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Input",hash:{isEditing:(n=e!=null?r(e,"props"):e)!=null?r(n,"isEditing"):n,labelClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"labelClass"):n,inputClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputClass"):n,inputMainClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputMainClass"):n,inputType:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputType"):n,inputLabel:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputLabel"):n,inputName:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputName"):n},data:u,loc:{start:{line:6,column:8},end:{line:14,column:11}}}))!=null?n:"")+`
`},4:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"        "+((n=(r(i,"Button")||e&&r(e,"Button")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Button",hash:{onClick:(n=e!=null?r(e,"props"):e)!=null?r(n,"onClick"):n,buttonType:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonType"):n,buttonClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonClass"):n,buttonText:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonText"):n},data:u,loc:{start:{line:19,column:8},end:{line:24,column:11}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`<main class="page">
`+((n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"page__form",onSubmit:e!=null?r(e,"onSubmitForm"):e},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:2,column:2},end:{line:27,column:11}}}))!=null?n:"")+`</main>
`},useData:!0}),ir=I.template({1:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return`  <a
    href="`+p((r=(r=d(i,"buttonLink")||(e!=null?d(e,"buttonLink"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonLink",hash:{},data:u,loc:{start:{line:3,column:10},end:{line:3,column:24}}}):r))+`"
    class="button `+p((r=(r=d(i,"buttonClass")||(e!=null?d(e,"buttonClass"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonClass",hash:{},data:u,loc:{start:{line:4,column:18},end:{line:4,column:33}}}):r))+`"
    data-page="`+p((r=(r=d(i,"buttonLink")||(e!=null?d(e,"buttonLink"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonLink",hash:{},data:u,loc:{start:{line:5,column:15},end:{line:5,column:29}}}):r))+`"
  >
`+((n=d(i,"if").call(c,e!=null?d(e,"buttonImage"):e,{name:"if",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:7,column:4},end:{line:13,column:11}}}))!=null?n:"")+"    "+p((r=(r=d(i,"buttonText")||(e!=null?d(e,"buttonText"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonText",hash:{},data:u,loc:{start:{line:14,column:4},end:{line:14,column:18}}}):r))+`
  </a>
`},2:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a="function",h=t.escapeExpression,p=t.lookupProperty||function(d,l){if(Object.prototype.hasOwnProperty.call(d,l))return d[l]};return`      <img
        src="`+h((n=(n=p(i,"buttonImage")||(e!=null?p(e,"buttonImage"):e))!=null?n:c,typeof n===a?n.call(r,{name:"buttonImage",hash:{},data:u,loc:{start:{line:9,column:13},end:{line:9,column:28}}}):n))+`"
        alt="`+h((n=(n=p(i,"imageAlt")||(e!=null?p(e,"imageAlt"):e))!=null?n:c,typeof n===a?n.call(r,{name:"imageAlt",hash:{},data:u,loc:{start:{line:10,column:13},end:{line:10,column:25}}}):n))+`"
        class="`+h((n=(n=p(i,"buttonImageClass")||(e!=null?p(e,"buttonImageClass"):e))!=null?n:c,typeof n===a?n.call(r,{name:"buttonImageClass",hash:{},data:u,loc:{start:{line:11,column:15},end:{line:11,column:35}}}):n))+`"
      />
`},4:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return'  <button type="'+p((r=(r=d(i,"buttonType")||(e!=null?d(e,"buttonType"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonType",hash:{},data:u,loc:{start:{line:17,column:16},end:{line:17,column:30}}}):r))+'" class="button '+p((r=(r=d(i,"buttonClass")||(e!=null?d(e,"buttonClass"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonClass",hash:{},data:u,loc:{start:{line:17,column:46},end:{line:17,column:61}}}):r))+`">
`+((n=d(i,"if").call(c,e!=null?d(e,"buttonImage"):e,{name:"if",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:18,column:4},end:{line:24,column:11}}}))!=null?n:"")+"    "+p((r=(r=d(i,"buttonText")||(e!=null?d(e,"buttonText"):e))!=null?r:a,typeof r===h?r.call(c,{name:"buttonText",hash:{},data:u,loc:{start:{line:25,column:4},end:{line:25,column:18}}}):r))+`
  </button>
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return((n=r(i,"if").call(e??(t.nullContext||{}),e!=null?r(e,"buttonLink"):e,{name:"if",hash:{},fn:t.program(1,u,0),inverse:t.program(4,u,0),data:u,loc:{start:{line:1,column:0},end:{line:27,column:7}}}))!=null?n:"")+`



`},useData:!0});class J extends O{constructor(e){super({...e,events:{click:e.onClick}})}render(){return this.compile(ir,this.props)}}const rn={first_name:{regex:/^[A-Za-zА-ЯЁа-яё][A-Za-zА-ЯЁа-яё-]*$/,errorMessage:"Имя должно начинаться с заглавной буквы, содержать только буквы или дефис, и не должно содержать пробелы, цифры или специальные символы"},second_name:{regex:/^[A-Za-zА-ЯЁа-яё][A-Za-zА-ЯЁа-яё-]*$/,errorMessage:"Фамилия должна начинаться с заглавной буквы, содержать только буквы или дефис, и не должна содержать пробелы, цифры или специальные символы"},display_name:{regex:/^[A-Za-zА-ЯЁа-яё][A-Za-zА-ЯЁа-яё-]*$/,errorMessage:"Имя должно начинаться с буквы и содержать только буквы или дефис, без пробелов или спецсимволов"},login:{regex:new RegExp("^(?!-|\\d)[A-Za-z0-9_-]{3,20}(?<!-)$"),errorMessage:"Логин должен быть от 3 до 20 символов. Допустимые символы: a-zA-Z, 0-9, -, _"},email:{regex:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,errorMessage:"Введите корректный адрес электронной почты в формате example@domain.com"},password:{regex:/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,40}$/,errorMessage:"Пароль должен быть от 8 до 40 символов, содержать хотя бы одну заглавную букву и хотя бы одну цифру"},confirmPassword:{regex:/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,40}$/,errorMessage:"Повторите пароль"},oldPassword:{regex:/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,40}$/,errorMessage:"Пароль должен быть от 8 до 40 символов, содержать хотя бы одну заглавную букву и хотя бы одну цифру"},newPassword:{regex:/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,40}$/,errorMessage:"Пароль должен быть от 8 до 40 символов, содержать хотя бы одну заглавную букву и хотя бы одну цифру"},phone:{regex:/^[\s()+-]*([0-9][\s()+-]*){6,20}$/,errorMessage:"Номер телефона должен содержать от 10 до 15 цифр"},message:{regex:/^.+$/,errorMessage:"Сообщение не должно быть пустым"}},ar=t=>rn[t]?.errorMessage||"Поле заполнено некорректно",He=t=>{const e=document.getElementById(`${t.name}-error`),i=rn[t.name],f=t.closest(".dynamic-input"),u=t.closest(".line-input");return i&&!i.regex.test(t.value)?(e&&(e.classList.add("input__error_visible"),e.textContent=ar(t.name)),f&&f.classList.add("error"),u&&u.classList.add("error"),!1):(e&&(e.classList.remove("input__error_visible"),e.textContent=""),f&&f.classList.remove("error"),u&&u.classList.remove("error"),!0)},ae=t=>{const e=Array.from(t.querySelectorAll("input, textarea"));let i=!0;return e.forEach(f=>{He(f)||(i=!1)}),i},or=t=>{Array.from(t.querySelectorAll("input, textarea")).forEach(i=>{const f=i;f.addEventListener("input",()=>He(f)),f.addEventListener("focusout",()=>{f.value.trim()===""&&He(f)})})};function sn(t){const e=t.querySelector(".dynamic-input__placeholder");e&&(e.classList.add("dynamic-input__placeholder_active"),e.style.top="3px")}function an(t){const e=t.querySelector(".dynamic-input__placeholder");e&&(e.classList.remove("dynamic-input__placeholder_active"),e.style.top="50%")}const lr=t=>{t.forEach(e=>{const i=e.querySelector(".dynamic-input__data");i&&(i.addEventListener("focus",()=>{sn(e)}),i.addEventListener("focusout",()=>{i.value.length>0||an(e)}))})},ur=I.template({1:function(t,e,i,f,u){return`      disabled=true
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return"<div class="+p((r=(r=d(i,"inputMainClass")||(e!=null?d(e,"inputMainClass"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputMainClass",hash:{},data:u,loc:{start:{line:1,column:11},end:{line:1,column:29}}}):r))+`>
  <label for=`+p((r=(r=d(i,"inputName")||(e!=null?d(e,"inputName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputName",hash:{},data:u,loc:{start:{line:2,column:13},end:{line:2,column:26}}}):r))+" class="+p((r=(r=d(i,"labelClass")||(e!=null?d(e,"labelClass"):e))!=null?r:a,typeof r===h?r.call(c,{name:"labelClass",hash:{},data:u,loc:{start:{line:2,column:33},end:{line:2,column:47}}}):r))+">"+p((r=(r=d(i,"inputLabel")||(e!=null?d(e,"inputLabel"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputLabel",hash:{},data:u,loc:{start:{line:2,column:48},end:{line:2,column:62}}}):r))+`</label>
  <input
    name=`+p((r=(r=d(i,"inputName")||(e!=null?d(e,"inputName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputName",hash:{},data:u,loc:{start:{line:4,column:9},end:{line:4,column:22}}}):r))+`
    id=`+p((r=(r=d(i,"inputName")||(e!=null?d(e,"inputName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputName",hash:{},data:u,loc:{start:{line:5,column:7},end:{line:5,column:20}}}):r))+`
    type=`+p((r=(r=d(i,"inputType")||(e!=null?d(e,"inputType"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputType",hash:{},data:u,loc:{start:{line:6,column:9},end:{line:6,column:22}}}):r))+`
    class=`+p((r=(r=d(i,"inputClass")||(e!=null?d(e,"inputClass"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputClass",hash:{},data:u,loc:{start:{line:7,column:10},end:{line:7,column:24}}}):r))+`
    value="`+p((r=(r=d(i,"inputValue")||(e!=null?d(e,"inputValue"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputValue",hash:{},data:u,loc:{start:{line:8,column:11},end:{line:8,column:25}}}):r))+`"
`+((n=d(i,"unless").call(c,e!=null?d(e,"isEditing"):e,{name:"unless",hash:{},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:9,column:4},end:{line:11,column:15}}}))!=null?n:"")+`  />
  <span id="`+p((r=(r=d(i,"inputName")||(e!=null?d(e,"inputName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"inputName",hash:{},data:u,loc:{start:{line:13,column:12},end:{line:13,column:25}}}):r))+`-error" class="input__error"></span>
</div>


`},useData:!0});class B extends O{constructor(e){super({...e,events:{focus:i=>{sn(i.target)},focusout:i=>{an(i.target),He(i.target)}}})}getEvents(){return this.props.events}render(){return this.compile(ur,this.props)}}function cr(t,e){const i=document.querySelector(t);return i.innerHTML="",i.append(e.getContent()),i}function pr(t,e){return t===e}class hr{constructor(e,i,f){this.pathname=e,this.blockClass=i,this.query=f}block=null;navigate(e){this.match(e)&&(this.pathname=e,this.render())}leave(){this.block=null}match(e){return pr(e,this.pathname)}render(){if(!this.block){this.block=new this.blockClass({}),cr(this.query,this.block);return}}}class ${constructor(e){if(this.rootQuery=e,$.__instance)return $.__instance;this.routes=[],$.__instance=this}static back(){throw new Error("Method not implemented.")}static forward(){throw new Error("Method not implemented.")}static getRoute(e){throw new Error("Method not implemented.")}static go(e){throw new Error("Method not implemented.")}static use(e,i){throw new Error("Method not implemented.")}static reset(){throw new Error("Method not implemented.")}static __instance;routes=[];currentRoute=null;history=window.history;use(e,i){const f=new hr(e,i,this.rootQuery);return this.routes.push(f),this}reset(){const e=$.__instance;e&&(e.routes=[],e.currentRoute=null,e.history.replaceState({},"","/"))}start(){window.onpopstate=e=>{const i=e.currentTarget;this._onRoute(i.location.pathname)},this._onRoute(window.location.pathname)}_onRoute(e){const i=[T.login,T.signUp].includes(e);if(A.isUserAuthorized()&&i){this.go(T.messenger);return}const f=this.getRoute(e);if(!f){this.getRoute(T.error)?.render();return}this.currentRoute&&this.currentRoute!==f&&this.currentRoute.leave(),this.currentRoute=f,f.render()}go(e){this.history.pushState({},"",e),this._onRoute(e)}back(){this.history.back()}forward(){this.history.forward()}getRoute(e){return this.routes.find(i=>i.match(e))}}const j=new $("#app"),T={login:"/",signUp:"/sign-up",messenger:"/messenger",settings:"/settings",error:"/error"},fr=()=>[new B({inputName:"email",inputLabel:"Почта",inputType:"email",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"login",inputLabel:"Логин",inputType:"text",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"first_name",inputLabel:"Имя",inputType:"text",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"second_name",inputLabel:"Фамилия",inputType:"text",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"phone",inputLabel:"Телефон",inputType:"tel",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"password",inputLabel:"Пароль",inputType:"password",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"confirmPassword",inputLabel:"Пароль (еще раз)",inputType:"password",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0})],dr=()=>[new J({buttonText:"Зарегистрироваться",buttonClass:"button_primary",buttonType:"submit"}),new J({buttonText:"Войти",buttonClass:"button_text",buttonType:"button",onClick:t=>{t.preventDefault(),j.go(T.login)}})];class mr extends Fe{constructor(){super("/auth")}async signin(e){return this.http.post("/signin",e)}async signup(e){return this.http.post("/signup",{...e})}async getUser(){return this.http.get("/user")}async logout(){return this.http.post("/logout",{})}create=void 0;update=void 0;delete=void 0;request=void 0}const Ne=new mr;class gr{async login(e){try{if(!ae(e)){D("Login data is invalid");return}const f=new FormData(e),u={login:f.get("login"),password:f.get("password")};await Ne.signin(u).then(async()=>{await this.getUser(),await W.fetchChats(),j.go(T.messenger)}).catch(n=>{n.reason==="Пользователь уже в системе"?j.go(T.messenger):n.reason?D(n.reason):D("Неправильный логин или пароль")})}catch(i){D(`${i}`)}}async signup(e){try{if(!ae(e)){D("Signup data is invalid");return}const f=new FormData(e),u={first_name:f.get("first_name"),second_name:f.get("second_name"),login:f.get("login"),email:f.get("email"),phone:f.get("phone"),password:f.get("password")};await Ne.signup(u).then(async()=>{await this.getUser(),j.go(T.messenger)}).catch(n=>{n.reason?D(n.reason):D("Некорректные данные: логин или email уже используются")})}catch(i){D(`${i}`)}}async logout(){try{await Ne.logout(),A.set("user",""),j.go("/")}catch(e){D(`${e}`)}}async getUser(){try{const e=await Ne.getUser();return A.set("user",e),e}catch{return}}}const le=new gr,vr=t=>{t.preventDefault();const e=t.target;le.signup(e)};class _r extends O{constructor(){super({buttons:dr(),inputs:fr(),onSubmitForm:e=>vr(e)})}render(){return this.compile(sr,this.props)}}I.registerHelper("isCurrentUserMessage",function(t){return t?"message_mine":"message_other"});I.registerHelper("formatDate",function(t){const e=new Date(t),i=new Date().getFullYear(),f=e.getFullYear(),u=e.getDate(),r=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][e.getMonth()];return f===i?`${u} ${r}`:`${u} ${r} ${f}`});I.registerHelper("formatTime",function(t){return new Date(t).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})});I.registerHelper("isEqual",function(t,e){return typeof e=="object"&&console.error("b передается как объект, ожидается значение:",e),t===e});const yr=I.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return'<form class="'+t.escapeExpression((n=(n=r(i,"class")||(e!=null?r(e,"class"):e))!=null?n:t.hooks.helperMissing,typeof n=="function"?n.call(e??(t.nullContext||{}),{name:"class",hash:{},data:u,loc:{start:{line:1,column:13},end:{line:1,column:22}}}):n))+`"></form>
`},useData:!0});class br extends O{constructor(e){super({...e,events:{submit:e.onSubmit}})}render(){return this.compile(yr,this.props)}}const Cr=I.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return'<div class="popup__background '+t.escapeExpression((n=(n=r(i,"visibility")||(e!=null?r(e,"visibility"):e))!=null?n:t.hooks.helperMissing,typeof n=="function"?n.call(e??(t.nullContext||{}),{name:"visibility",hash:{},data:u,loc:{start:{line:1,column:30},end:{line:1,column:44}}}):n))+`" data-close="true">
  <div class="popup__content">
  </div>
</div>


`},useData:!0});class kr extends O{constructor(e){super({...e,events:{click:i=>this.handleClick(i)}})}handleClick(e){const i=e.target;i&&i.dataset.close==="true"&&this.props.onClick&&this.props.onClick()}render(){return this.compile(Cr,this.props)}}const Pr=I.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`<div class="left-panel">
  `+((n=(a(i,"SearchContact")||e&&a(e,"SearchContact")||c).call(r,{name:"SearchContact",hash:{changePage:e!=null?a(e,"changePage"):e},data:u,loc:{start:{line:2,column:2},end:{line:2,column:48}}}))!=null?n:"")+`
  <div class="contacts">
  `+((n=(a(i,"ChatList")||e&&a(e,"ChatList")||c).call(r,{name:"ChatList",hash:{chats:e!=null?a(e,"chats"):e},data:u,loc:{start:{line:4,column:2},end:{line:4,column:33}}}))!=null?n:"")+`
  </div>
</div>
`},useData:!0});class Sr extends O{constructor(e){super({...e,chats:e.chats})}render(){return this.compile(Pr,this.props)}}const wr=I.template({1:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"    "+((n=(r(i,"Contacts")||e&&r(e,"Contacts")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Contacts",hash:{newMessages:e!=null?r(e,"unread_count"):e,lastMessageDate:(n=e!=null?r(e,"last_message"):e)!=null?r(n,"time"):n,chatLastMessage:(n=e!=null?r(e,"last_message"):e)!=null?r(n,"content"):n,chatName:e!=null?r(e,"title"):e,avatar:e!=null?r(e,"avatar"):e,chatId:e!=null?r(e,"id"):e},data:u,loc:{start:{line:3,column:4},end:{line:10,column:7}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`<div class="chat-list">
`+((n=r(i,"each").call(e??(t.nullContext||{}),e!=null?r(e,"chats"):e,{name:"each",hash:{},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:2,column:2},end:{line:11,column:11}}}))!=null?n:"")+`</div>
`},useData:!0});class Er extends O{constructor(e){super({...e})}render(){return this.compile(wr,this.props)}}const xr=I.template({1:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Modal")||e&&r(e,"Modal")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Modal",hash:{visibility:e!=null?r(e,"showChatPopup"):e},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:29,column:4},end:{line:49,column:14}}}))!=null?n:""},2:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{onSubmit:e!=null?r(e,"handleChatCreate"):e},fn:t.program(3,u,0),inverse:t.noop,data:u,loc:{start:{line:30,column:6},end:{line:48,column:15}}}))!=null?n:""},3:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`        <h1 class="form__title">Новый чат</h1>
        <div style="position: relative; margin-bottom: 40px">
          `+((n=(a(i,"Input")||e&&a(e,"Input")||c).call(r,{name:"Input",hash:{isEditing:!0,labelClass:"dynamic-input__placeholder",inputLabel:"Название",inputClass:"dynamic-input__data",inputMainClass:"dynamic-input",inputType:"text",inputName:"title"},data:u,loc:{start:{line:33,column:10},end:{line:41,column:13}}}))!=null?n:"")+`
        </div>
        `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{buttonClass:"button_primary",buttonText:"Создать",buttonType:"submit"},data:u,loc:{start:{line:43,column:8},end:{line:47,column:11}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h=t.lookupProperty||function(p,d){if(Object.prototype.hasOwnProperty.call(p,d))return p[d]};return`<div class="chat-list-header">
  <div class="chat-list-header__button">
    `+((n=(h(i,"Button")||e&&h(e,"Button")||a).call(c,{name:"Button",hash:{onClick:e!=null?h(e,"onOpenCreateChat"):e,buttonClass:(n=e!=null?h(e,"createChatButton"):e)!=null?h(n,"buttonClass"):n,buttonType:(n=e!=null?h(e,"createChatButton"):e)!=null?h(n,"buttonType"):n,buttonText:(n=e!=null?h(e,"createChatButton"):e)!=null?h(n,"buttonText"):n},data:u,loc:{start:{line:3,column:4},end:{line:8,column:7}}}))!=null?n:"")+`
    `+((n=(h(i,"Button")||e&&h(e,"Button")||a).call(c,{name:"Button",hash:{onClick:e!=null?h(e,"onChangePage"):e,buttonClass:(n=e!=null?h(e,"profileButton"):e)!=null?h(n,"buttonClass"):n,buttonType:(n=e!=null?h(e,"profileButton"):e)!=null?h(n,"buttonType"):n,buttonText:(n=e!=null?h(e,"profileButton"):e)!=null?h(n,"buttonText"):n},data:u,loc:{start:{line:9,column:4},end:{line:14,column:7}}}))!=null?n:"")+`
  </div>
  <div class="chat-list-header__search-container">
    <input
      class="chat-list-header__search-input"
      type="text"
      placeholder="Поиск"
    />
    <img
      class="chat-list-header__search-icon"
      src="`+t.escapeExpression((r=(r=h(i,"searchIcon")||(e!=null?h(e,"searchIcon"):e))!=null?r:a,typeof r=="function"?r.call(c,{name:"searchIcon",hash:{},data:u,loc:{start:{line:24,column:11},end:{line:24,column:25}}}):r))+`"
      alt="Поиск"
    />
  </div>
`+((n=(h(i,"Popup")||e&&h(e,"Popup")||a).call(c,{name:"Popup",hash:{onClick:e!=null?h(e,"toggleChatCreate"):e,visibility:e!=null?h(e,"showChatPopup"):e},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:28,column:2},end:{line:50,column:12}}}))!=null?n:"")+`</div>
`},useData:!0}),Mr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='50px'%20height='50px'%3e%3cpath%20d='M%2021%203%20C%2011.621094%203%204%2010.621094%204%2020%20C%204%2029.378906%2011.621094%2037%2021%2037%20C%2024.710938%2037%2028.140625%2035.804688%2030.9375%2033.78125%20L%2044.09375%2046.90625%20L%2046.90625%2044.09375%20L%2033.90625%2031.0625%20C%2036.460938%2028.085938%2038%2024.222656%2038%2020%20C%2038%2010.621094%2030.378906%203%2021%203%20Z%20M%2021%205%20C%2029.296875%205%2036%2011.703125%2036%2020%20C%2036%2028.296875%2029.296875%2035%2021%2035%20C%2012.703125%2035%206%2028.296875%206%2020%20C%206%2011.703125%2012.703125%205%2021%205%20Z'/%3e%3c/svg%3e";class Lr extends O{constructor(){super({searchIcon:Mr,showChatPopup:"hidden",profileButton:{buttonText:"Профиль >",buttonClass:"button_link",buttonType:"button"},createChatButton:{buttonText:"Новый чат",buttonClass:"button_link",buttonType:"button"},onChangePage:e=>{e.preventDefault(),j.go(T.settings)},onOpenCreateChat:e=>{e.preventDefault(),this.toggleCreateChatPopup()},handleChatCreate:e=>this.handleCreateChat(e),toggleChatCreate:()=>this.toggleCreateChatPopup()})}toggleCreateChatPopup(){const e=this.props.showChatPopup==="hidden"?"visible":"hidden";this.setProps({showChatPopup:e})}handleCreateChat=e=>{e.preventDefault();const f=new FormData(e.target).get("title");W.create(f)};render(){return this.compile(xr,this.props)}}const ee="/middle.messenger.praktikum.yandex/assets/avatrar-r7AXyxHO.jpg",Or=I.template({1:function(t,e,i,f,u){return"chat_highlighted"},3:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`      <div class="chat__unviewed">
        <p class="chat__unviewed-count">`+t.escapeExpression((n=(n=r(i,"newMessages")||(e!=null?r(e,"newMessages"):e))!=null?n:t.hooks.helperMissing,typeof n=="function"?n.call(e??(t.nullContext||{}),{name:"newMessages",hash:{},data:u,loc:{start:{line:13,column:40},end:{line:13,column:55}}}):n))+`</p>
      </div>
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return'<div class="chat '+((n=d(i,"if").call(c,e!=null?d(e,"hasNewMessages"):e,{name:"if",hash:{},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:1,column:17},end:{line:1,column:62}}}))!=null?n:"")+`">
  <div class="chat__info">      
    <img class="chat__avatar" src="`+p((r=(r=d(i,"icon")||(e!=null?d(e,"icon"):e))!=null?r:a,typeof r===h?r.call(c,{name:"icon",hash:{},data:u,loc:{start:{line:3,column:35},end:{line:3,column:43}}}):r))+`" alt="Аватар">
    <div class="chat__details">
      <h6 class="chat__title">`+p((r=(r=d(i,"chatName")||(e!=null?d(e,"chatName"):e))!=null?r:a,typeof r===h?r.call(c,{name:"chatName",hash:{},data:u,loc:{start:{line:5,column:30},end:{line:5,column:42}}}):r))+`</h6>
      <p class="chat__last-message">`+p((r=(r=d(i,"chatLastMessage")||(e!=null?d(e,"chatLastMessage"):e))!=null?r:a,typeof r===h?r.call(c,{name:"chatLastMessage",hash:{},data:u,loc:{start:{line:6,column:36},end:{line:6,column:55}}}):r))+`</p>
    </div>
  </div>
  <div class="chat__date-info">
    <p class="chat__date">`+p((d(i,"formatTime")||e&&d(e,"formatTime")||a).call(c,e!=null?d(e,"lastMessageDate"):e,{name:"formatTime",hash:{},data:u,loc:{start:{line:10,column:26},end:{line:10,column:56}}}))+`</p>
`+((n=d(i,"if").call(c,e!=null?d(e,"hasNewMessages"):e,{name:"if",hash:{},fn:t.program(3,u,0),inverse:t.noop,data:u,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))!=null?n:"")+`  </div>
  
</div>
`},useData:!0}),Ve="https://ya-praktikum.tech/api/v2";class Ar extends O{constructor(e){super(e),console.log("proops",e),console.log("props.avatar",e.avatar);const i=`${Ve}/resources/`,f=e.avatar?.startsWith("/")?`${i}${e.avatar}`:e.avatar||ee,u=e.newMessages;this.setProps({...e,hasNewMessages:u,icon:f}),this.setProps({events:{click:this.onChatClick.bind(this)}})}onChatClick(){W.selectChat(this.props.chatId)}render(){return this.compile(Or,this.props)}}class Ir extends Fe{constructor(){super("/resources")}getAvatar(e){return this.http.get(`${e}`)}create=void 0;update=void 0;delete=void 0;request=void 0}const Rr=new Ir;class Dr extends Fe{constructor(){super("/user")}update(e){return this.http.put("/profile",e)}updateAvatar(e){return this.http.put("/profile/avatar",e).then(i=>i).catch(i=>{throw i.message.includes("Request timed out")||D("Ошибка при обновлении аватара"),i})}changePassword(e){return this.http.put("/password",e)}getUser(){return this.http.get("/user")}searchUsers(e){return this.http.post("/search",{login:e})}logout(){return this.http.post("/logout",{})}create=void 0;delete=void 0;request=void 0}const Te=new Dr;class Nr{async updateUserInfo(e){try{if(!ae(e))throw new Error("User data is invalid to update");const f=new FormData(e),u={id:f.get("id"),first_name:f.get("first_name"),second_name:f.get("second_name"),login:f.get("login"),email:f.get("email"),phone:f.get("phone"),display_name:f.get("display_name"),password:f.get("password"),avatar:f.get("avatar")},n=await Te.update(u);A.set("user",n)}catch{}}async updateUserAvatar(e){try{const i=new FormData(e),f=await Te.updateAvatar(i);f&&f&&f.avatar&&A.set("user.avatar",f.avatar)}catch{}}async getUserAvatar(e){try{const i=await Rr.getAvatar(e);A.set("user.avatar",i)}catch{}}async changePassword(e){try{if(!ae(e))throw new Error("password data is invalid to update");const f=new FormData(e),u={oldPassword:f.get("oldPassword"),newPassword:f.get("newPassword")};await Te.changePassword(u)}catch{}}async searchUsers(e){try{return await Te.searchUsers(e)}catch(i){throw i}}}const Ue=new Nr,Tr=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return"    "+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{onClick:e!=null?a(e,"onAvatarPopupClick"):e,buttonClass:"button_text",buttonText:"Изменить аватар чата",buttonType:"button"},data:u,loc:{start:{line:17,column:4},end:{line:22,column:7}}}))!=null?n:"")+`

    `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{onClick:e!=null?a(e,"onAddUserPopupClick"):e,buttonClass:"button_text",buttonText:"Добавить участника",buttonType:"button"},data:u,loc:{start:{line:24,column:4},end:{line:29,column:7}}}))!=null?n:"")+`

    `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{onClick:e!=null?a(e,"onRemoveUserClick"):e,buttonClass:"button_text",buttonText:"Удалить пользователя",buttonType:"button"},data:u,loc:{start:{line:31,column:4},end:{line:36,column:7}}}))!=null?n:"")+`
`},3:function(t,e,i,f,u){var n,r,c,a=t.lookupProperty||function(p,d){if(Object.prototype.hasOwnProperty.call(p,d))return p[d]},h="";return n=(r=(r=a(i,"Modal")||(e!=null?a(e,"Modal"):e))!=null?r:t.hooks.helperMissing,c={name:"Modal",hash:{},fn:t.program(4,u,0),inverse:t.noop,data:u,loc:{start:{line:40,column:4},end:{line:66,column:14}}},typeof r=="function"?r.call(e??(t.nullContext||{}),c):r),a(i,"Modal")||(n=t.hooks.blockHelperMissing.call(e,n,c)),n!=null&&(h+=n),h},4:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"profile__form",onSubmit:e!=null?r(e,"handleAddUser"):e},fn:t.program(5,u,0),inverse:t.noop,data:u,loc:{start:{line:41,column:6},end:{line:65,column:15}}}))!=null?n:""},5:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`        <h1 class="form__title">Добавить пользователя</h1>
        <div style="position: relative; margin-bottom: 10px">`+((n=(a(i,"Input")||e&&a(e,"Input")||c).call(r,{name:"Input",hash:{labelClass:"dynamic-input__placeholder",inputClass:"dynamic-input__data",inputMainClass:"dynamic-input",isEditing:"true",inputLabel:"Логин пользователя",labelName:"login",inputType:"text",inputName:"login"},data:u,loc:{start:{line:43,column:61},end:{line:52,column:13}}}))!=null?n:"")+`</div>
          <div class="user-list">
`+((n=a(i,"each").call(r,e!=null?a(e,"users"):e,{name:"each",hash:{},fn:t.program(6,u,0),inverse:t.noop,data:u,loc:{start:{line:54,column:11},end:{line:59,column:17}}}))!=null?n:"")+`</div>
        `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{buttonClass:"button_primary",buttonText:"Добавить",buttonType:"submit"},data:u,loc:{start:{line:60,column:8},end:{line:64,column:11}}}))!=null?n:"")+`
`},6:function(t,e,i,f,u){var n=t.lambda,r=t.escapeExpression,c=t.lookupProperty||function(a,h){if(Object.prototype.hasOwnProperty.call(a,h))return a[h]};return`          <div class="user-list__item">
            <span class="user-list__item-display_name">`+r(n(e!=null?c(e,"display_name"):e,e))+`</span>
            <span class="user-list__item-login">`+r(n(e!=null?c(e,"login"):e,e))+`</span>
          </div>
        `},8:function(t,e,i,f,u,n,r){var c,a,h,p=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]},d="";return c=(a=(a=p(i,"Modal")||(e!=null?p(e,"Modal"):e))!=null?a:t.hooks.helperMissing,h={name:"Modal",hash:{},fn:t.program(9,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:70,column:4},end:{line:92,column:14}}},typeof a=="function"?a.call(e??(t.nullContext||{}),h):a),p(i,"Modal")||(c=t.hooks.blockHelperMissing.call(e,c,h)),c!=null&&(d+=c),d},9:function(t,e,i,f,u,n,r){var c,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`      <h1 class="form__title">Удалить пользователя</h1>
      <div class="user-list">
`+((c=a(i,"each").call(e??(t.nullContext||{}),e!=null?a(e,"users"):e,{name:"each",hash:{},fn:t.program(10,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:73,column:8},end:{line:90,column:17}}}))!=null?c:"")+`      </div>
`},10:function(t,e,i,f,u,n,r){var c,a=t.lambda,h=t.escapeExpression,p=e??(t.nullContext||{}),d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return`          <div class="user-list__item">
            <span class="user-list__item-display_name">`+h(a(e!=null?d(e,"display_name"):e,e))+`</span>
            <span class="user-list__item-login">`+h(a(e!=null?d(e,"login"):e,e))+`</span>
`+((c=d(i,"if").call(p,(d(i,"isEqual")||e&&d(e,"isEqual")||t.hooks.helperMissing).call(p,e!=null?d(e,"id"):e,r[1]!=null?d(r[1],"currentUserId"):r[1],{name:"isEqual",hash:{},data:u,loc:{start:{line:77,column:14},end:{line:77,column:48}}}),{name:"if",hash:{},fn:t.program(11,u,0,n,r),inverse:t.program(13,u,0,n,r),data:u,loc:{start:{line:77,column:8},end:{line:88,column:13}}}))!=null?c:"")+`          </div>
`},11:function(t,e,i,f,u){return`        <button class="button button_link" disabled>
          Это вы
        </button>
`},13:function(t,e,i,f,u){var n=t.lookupProperty||function(r,c){if(Object.prototype.hasOwnProperty.call(r,c))return r[c]};return`        <button
          class="button button_danger button_delete"
          data-user-id="`+t.escapeExpression(t.lambda(e!=null?n(e,"id"):e,e))+`"
        >
          Удалить
        </button>
`},15:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Modal")||e&&r(e,"Modal")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Modal",hash:{title:"Загрузите файл"},fn:t.program(16,u,0),inverse:t.noop,data:u,loc:{start:{line:97,column:4},end:{line:116,column:14}}}))!=null?n:""},16:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"profile__form",onSubmit:e!=null?r(e,"handleSetChatAvatar"):e},fn:t.program(17,u,0),inverse:t.noop,data:u,loc:{start:{line:98,column:6},end:{line:115,column:15}}}))!=null?n:""},17:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h=t.lookupProperty||function(p,d){if(Object.prototype.hasOwnProperty.call(p,d))return p[d]};return`        <h1 class="form__title">Загрузите файл</h1>
        <div>
          `+((n=(h(i,"Input")||e&&h(e,"Input")||a).call(c,{name:"Input",hash:{isEditing:"true",inputLabel:"Выбрать файл на компьютере",labelName:"avatar",inputType:"file",inputName:"avatar"},data:u,loc:{start:{line:101,column:10},end:{line:107,column:13}}}))!=null?n:"")+`
          <p class="file">`+t.escapeExpression((r=(r=h(i,"fileName")||(e!=null?h(e,"fileName"):e))!=null?r:a,typeof r=="function"?r.call(c,{name:"fileName",hash:{},data:u,loc:{start:{line:108,column:26},end:{line:108,column:38}}}):r))+`</p>
        </div>
        `+((n=(h(i,"Button")||e&&h(e,"Button")||a).call(c,{name:"Button",hash:{buttonClass:"button_primary",buttonText:"Поменять",buttonType:"submit"},data:u,loc:{start:{line:110,column:8},end:{line:114,column:11}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u,n,r){var c,a,h=t.escapeExpression,p=e??(t.nullContext||{}),d=t.hooks.helperMissing,l=t.lookupProperty||function(o,s){if(Object.prototype.hasOwnProperty.call(o,s))return o[s]};return`<div class="dialog__header">
  <div class="header__title-container">
    <img class="container__avatar" src=`+h(t.lambda(e!=null?l(e,"avatar"):e,e))+` alt="img" />
    <p class="container__title">`+h((a=(a=l(i,"chatName")||(e!=null?l(e,"chatName"):e))!=null?a:d,typeof a=="function"?a.call(p,{name:"chatName",hash:{},data:u,loc:{start:{line:4,column:32},end:{line:4,column:44}}}):a))+`</p>
  </div>
  `+((c=(l(i,"Button")||e&&l(e,"Button")||d).call(p,{name:"Button",hash:{onClick:e!=null?l(e,"onOptionsClick"):e,imageAlt:"settings",buttonClass:"header__ellipse",buttonImage:e!=null?l(e,"ellipseIcon"):e,buttonType:"button"},data:u,loc:{start:{line:6,column:2},end:{line:12,column:5}}}))!=null?c:"")+`
`+((c=(l(i,"Modal")||e&&l(e,"Modal")||d).call(p,{name:"Modal",hash:{modalClassName:"modal_min modal_min-top-right",visibility:e!=null?l(e,"chatOptionsVisibility"):e},fn:t.program(1,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:13,column:2},end:{line:37,column:12}}}))!=null?c:"")+`
`+((c=(l(i,"Popup")||e&&l(e,"Popup")||d).call(p,{name:"Popup",hash:{onClick:e!=null?l(e,"onAddUserPopupClick"):e,visibility:e!=null?l(e,"addUserPopupVisibility"):e},fn:t.program(3,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:39,column:2},end:{line:67,column:12}}}))!=null?c:"")+`
`+((c=(l(i,"Popup")||e&&l(e,"Popup")||d).call(p,{name:"Popup",hash:{onClick:e!=null?l(e,"onRemoveUserClick"):e,visibility:e!=null?l(e,"deleteUserPopupVisibility"):e},fn:t.program(8,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:69,column:2},end:{line:93,column:12}}}))!=null?c:"")+`
  
`+((c=(l(i,"Popup")||e&&l(e,"Popup")||d).call(p,{name:"Popup",hash:{onClick:e!=null?l(e,"onAvatarPopupClick"):e,visibility:e!=null?l(e,"avatarChangeVisibility"):e},fn:t.program(15,u,0,n,r),inverse:t.noop,data:u,loc:{start:{line:96,column:2},end:{line:117,column:12}}}))!=null?c:"")+`</div>


`},useData:!0,useDepths:!0}),Br="data:image/svg+xml,%3c!--%20icon666.com%20-%20MILLIONS%20OF%20FREE%20VECTOR%20ICONS%20--%3e%3csvg%20enable-background='new%200%200%2024%2024'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='%234caf50'%3e%3cpath%20d='m12%209c-1.654%200-3%201.346-3%203s1.346%203%203%203%203-1.346%203-3-1.346-3-3-3z'%3e%3c/path%3e%3cpath%20d='m12%200c-1.654%200-3%201.346-3%203s1.346%203%203%203%203-1.346%203-3-1.346-3-3-3z'%3e%3c/path%3e%3cpath%20d='m12%2018c-1.654%200-3%201.346-3%203s1.346%203%203%203%203-1.346%203-3-1.346-3-3-3z'%3e%3c/path%3e%3c/g%3e%3cg%20fill='%23429846'%3e%3cpath%20d='m12%209c-1.654%200-3%201.346-3%203s1.346%203%203%203z'%3e%3c/path%3e%3cpath%20d='m12%200c-1.654%200-3%201.346-3%203s1.346%203%203%203z'%3e%3c/path%3e%3cpath%20d='m12%2018c-1.654%200-3%201.346-3%203s1.346%203%203%203z'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";class qr extends O{constructor(){const e=A.getState().selectedChat,f=(A.getState().chats||[]).find(n=>n.id===e),u=f&&f.avatar?`${Ve}/resources${f.avatar}`:ee;super({currentUserId:A.getState().user.id,ellipseIcon:Br,onAvatarPopupClick:()=>this.toggleAddChatAvatarPopup(this),avatarChangeVisibility:"hidden",chatOptionsVisibility:"hidden",onOptionsClick:()=>this.handleOptionsClick(this),addUserPopupVisibility:"hidden",onAddUserPopupClick:()=>this.toggleAddUserPopup(this),handleAddUser:n=>this.handleAddUser(n,this),deleteUserPopupVisibility:"hidden",onRemoveUserClick:()=>this.toggleDeleteUserPopup(this),avatar:u,chatName:f?.title,users:[],handleDeleteUser:n=>this.handleDeleteUser(n),handleSetChatAvatar:n=>this.handleSetChatAvatar(n)})}async loadUsers(){const e=A.getState().selectedChat,i=await W.getUsers(e);this.setProps({users:i}),this.bindDeleteUserButtons()}bindDeleteUserButtons(){document.querySelectorAll(".button_delete").forEach(i=>{i.addEventListener("click",this.handleDeleteUser)})}handleOptionsClick=e=>{e.setProps({chatOptionsVisibility:this.props.chatOptionsVisibility==="visible"?"hidden":"visible"})};toggleDeleteUserPopup=e=>{this.loadUsers(),e.setProps({deleteUserPopupVisibility:this.props.deleteUserPopupVisibility==="visible"?"hidden":"visible"}),this.handleOptionsClick(e)};toggleAddChatAvatarPopup=e=>{this.loadUsers(),e.setProps({avatarChangeVisibility:this.props.avatarChangeVisibility==="visible"?"hidden":"visible"}),this.handleOptionsClick(e)};toggleAddUserPopup=e=>{this.loadUsers(),e.setProps({addUserPopupVisibility:this.props.addUserPopupVisibility==="visible"?"hidden":"visible"}),this.handleOptionsClick(e)};handleAddUser=async(e,i)=>{e.preventDefault();const f=e.target,u=new FormData(f),n=A.getState().selectedChat,c=(await Ue.searchUsers(u.get("login")))[0];await W.addUserToChat(n,c.id),i.setProps({addUserPopupVisibility:"hidden"})};handleDeleteUser=e=>{const f=e.target.getAttribute("data-user-id");if(f){const u=parseInt(f,10),n=A.getState().selectedChat;W.deleteUserFromChat(n,u).then(()=>this.loadUsers()).catch(()=>D("Ошибка при удалении пользователя"))}};handleSetChatAvatar=async e=>{e.preventDefault();const u=e.target.querySelector('input[name="avatar"]')?.files?.[0];if(!u){D("Файл не выбран.");return}const n=A.getState().selectedChat,r=new FormData;r.append("avatar",u),r.append("chatId",n.toString()),console.log("Проверка formData перед отправкой",r);try{await W.addChatAvatar(r),await W.fetchChats(),this.updateChatAvatar(),this.setProps({avatarChangeVisibility:"hidden"}),console.log("Аватар успешно загружен.")}catch(c){D(`Ошибка при изменении аватара: ${JSON.stringify(c)}`)}};updateChatAvatar(){const e=A.getState().selectedChat,f=A.getState().chats.find(u=>u.id===e);f&&f.avatar&&this.setProps({avatar:`${Ve}/resources${f.avatar}`})}render(){return this.compile(Tr,this.props)}componentDidMount(){this.loadUsers()}}const Ur=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return"  "+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{class:"dialog__input-bar__input",imageAlt:"file",buttonClass:"input-bar__pin-button",buttonImage:e!=null?a(e,"paperclip"):e,buttonType:"button"},data:u,loc:{start:{line:2,column:2},end:{line:8,column:5}}}))!=null?n:"")+`
  <textarea
    name="message"
    class="dialog__input-bar__input"
    placeholder="Сообщение..."
  ></textarea>
  `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{imageAlt:"send",buttonImageClass:"input-bar__send-icon",buttonClass:"input-bar__send-button",buttonImage:e!=null?a(e,"arrowBtn"):e,buttonType:"submit"},data:u,loc:{start:{line:14,column:2},end:{line:20,column:5}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return((n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{onSubmit:e!=null?r(e,"handleSubmit"):e,class:"dialog__input-bar"},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))!=null?n:"")+`

`},useData:!0}),Hr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='none'%20stroke='%2358f95a'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='M4%2012h16m-7-7l7%207l-7%207'/%3e%3c/svg%3e",Vr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='none'%20stroke='%239858f9'%20stroke-linejoin='round'%20stroke-width='2'%3e%3cpath%20stroke-linecap='round'%20d='M4%204v16a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V8.342a2%202%200%200%200-.602-1.43l-4.44-4.342A2%202%200%200%200%2013.56%202H6a2%202%200%200%200-2%202'/%3e%3cpath%20d='M14%202v4a2%202%200%200%200%202%202h4'/%3e%3c/g%3e%3c/svg%3e";function Fr(t,e){t.preventDefault();const i=t.target,f=i.message.value.trim();if(f){const u=e.getProps("selectedChat");if(u){$e.sendMessage(u,f);const n=document.querySelector(".conversation__messages-container");n?.scrollTo(0,n.scrollHeight)}i.reset()}else throw Gr(),new Error("Поле сообщения пустое")}function Gr(){const t=document.querySelector(".input-bar__send-button"),e=document.querySelector(".dialog__input-bar__input");t&&e&&(t.classList.add("shake"),e.classList.add("shake"),setTimeout(()=>{t.classList.remove("shake"),e.classList.remove("shake")},300))}class Wr extends O{constructor(e){super({...e,paperclip:Vr,arrowBtn:Hr,handleSubmit:i=>Fr(i,this)})}render(){return this.compile(Ur,this.props)}}const jr=I.template({1:function(t,e,i,f,u){var n=t.lookupProperty||function(r,c){if(Object.prototype.hasOwnProperty.call(r,c))return r[c]};return'    <div class="message__date">'+t.escapeExpression((n(i,"formatDate")||e&&n(e,"formatDate")||t.hooks.helperMissing).call(e??(t.nullContext||{}),e!=null?n(e,"time"):e,{name:"formatDate",hash:{},data:u,loc:{start:{line:3,column:31},end:{line:3,column:50}}}))+`</div>
`},3:function(t,e,i,f,u){return`        message_mine
`},5:function(t,e,i,f,u){return`        message_other
      `},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h=t.escapeExpression,p=t.lookupProperty||function(d,l){if(Object.prototype.hasOwnProperty.call(d,l))return d[l]};return`<div class="message-wrapper">
`+((n=p(i,"if").call(c,e!=null?p(e,"showDate"):e,{name:"if",hash:{},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?n:"")+`  <div
    class="message
`+((n=p(i,"if").call(c,e!=null?p(e,"isCurrentUser"):e,{name:"if",hash:{},fn:t.program(3,u,0),inverse:t.program(5,u,0),data:u,loc:{start:{line:7,column:6},end:{line:11,column:13}}}))!=null?n:"")+`"
  >
    <p class="message__text">`+h((r=(r=p(i,"text")||(e!=null?p(e,"text"):e))!=null?r:a,typeof r=="function"?r.call(c,{name:"text",hash:{},data:u,loc:{start:{line:13,column:29},end:{line:13,column:37}}}):r))+`</p>
    <div class="message__time-container">
      <p class="message__time">`+h((p(i,"formatTime")||e&&p(e,"formatTime")||a).call(c,e!=null?p(e,"time"):e,{name:"formatTime",hash:{},data:u,loc:{start:{line:15,column:31},end:{line:15,column:50}}}))+`</p>
    </div>
  </div>
</div>


`},useData:!0});class zr extends O{constructor(e){super({...e})}render(){return this.compile(jr,this.props)}}const Zr=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return"    "+((n=(a(i,"Dialog")||e&&a(e,"Dialog")||c).call(r,{name:"Dialog",hash:{changePage:e!=null?a(e,"changePage"):e,chatName:e!=null?a(e,"chatName"):e,avatar:e!=null?a(e,"avatar"):e},data:u,loc:{start:{line:3,column:4},end:{line:7,column:7}}}))!=null?n:"")+`
    <div id="chat" class="dialog__messages-container">
`+((n=a(i,"each").call(r,e!=null?a(e,"messages"):e,{name:"each",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:9,column:6},end:{line:16,column:15}}}))!=null?n:"")+`        </div>
      <div class="input">
      `+((n=(a(i,"InputBar")||e&&a(e,"InputBar")||c).call(r,{name:"InputBar",hash:{selectedChat:e!=null?a(e,"selectedChat"):e},data:u,loc:{start:{line:19,column:6},end:{line:19,column:46}}}))!=null?n:"")+`
      </div>
  
`},2:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"        "+((n=(r(i,"Message")||e&&r(e,"Message")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Message",hash:{time:e!=null?r(e,"time"):e,text:e!=null?r(e,"content"):e,isCurrentUser:e!=null?r(e,"isMine"):e,showDate:e!=null?r(e,"showDate"):e},data:u,loc:{start:{line:10,column:8},end:{line:15,column:11}}}))!=null?n:"")+`
`},4:function(t,e,i,f,u){return`    <div class="dialog_not-selected">Выберите чат</div>
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`<div class="dialog">
`+((n=r(i,"if").call(e??(t.nullContext||{}),e!=null?r(e,"selectedChat"):e,{name:"if",hash:{},fn:t.program(1,u,0),inverse:t.program(4,u,0),data:u,loc:{start:{line:2,column:2},end:{line:24,column:9}}}))!=null?n:"")+`</div>


`},useData:!0});class Qr extends O{constructor(e){super({...e,avatar:ee,messages:e.messages})}componentDidMount(){W.fetchChats()}render(){return this.compile(Zr,this.props)}}const Jr=Ge(t=>{const e=t.selectedChat||0,i=t.chats?.find(r=>r.id===e),f=t?.user?.id,n=((t.messages||{})[e]||[]).map(r=>({...r,isMine:r.user_id===f}));return{chats:[...t.chats||[]],selectedChat:t.selectedChat,messages:n,userId:t?.user?.id,chatName:i?i.title:"Чат"}}),Kr=Jr(Qr);function G(t,e){if(t in I.helpers)throw`The ${t} component is already registered!`;I.registerHelper(t,function({hash:i,data:f,fn:u}){const n=new e(i),r=`data-id="${n.id}"`;"ref"in i&&((f.root.__refs=f.root.__refs||{})[i.ref]=n),(f.root.__children=f.root.__children||[]).push({component:n,embed(a){const h=a.querySelector(`[${r}]`);h&&(n.getContent()?.append(...Array.from(h.childNodes)),h.replaceWith(n.getContent()))}});const c=u?u(this):"";return`<div ${r}>${c}</div>`})}G("Form",br);G("Button",J);G("Input",B);G("Popup",kr);G("Modal",tn);G("LeftPanel",Sr);G("ChatList",Er);G("SearchContact",Lr);G("Contacts",Ar);G("Dialog",qr);G("InputBar",Wr);G("Message",zr);G("RightSide",Kr);const Yr=I.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h="function",p=t.escapeExpression,d=t.lookupProperty||function(l,o){if(Object.prototype.hasOwnProperty.call(l,o))return l[o]};return`<main class="error-page">
  <h1 class="page-title">`+p((r=(r=d(i,"errorCode")||(e!=null?d(e,"errorCode"):e))!=null?r:a,typeof r===h?r.call(c,{name:"errorCode",hash:{},data:u,loc:{start:{line:2,column:25},end:{line:2,column:38}}}):r))+`</h1>
  <p class="page-description">`+p((r=(r=d(i,"description")||(e!=null?d(e,"description"):e))!=null?r:a,typeof r===h?r.call(c,{name:"description",hash:{},data:u,loc:{start:{line:3,column:30},end:{line:3,column:45}}}):r))+`</p>
  `+((n=(d(i,"Button")||e&&d(e,"Button")||a).call(c,{name:"Button",hash:{onClick:e!=null?d(e,"onButtonClick"):e,buttonLink:"/",buttonClass:"button_text",buttonText:"На главную страницу"},data:u,loc:{start:{line:4,column:2},end:{line:9,column:5}}}))!=null?n:"")+`
</main>

`},useData:!0});class Xr extends O{constructor(e){super({...e,onButtonClick:i=>{i.preventDefault(),j.go(T.login)}})}render(){return this.compile(Yr,this.props)}}const $r=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.lookupProperty||function(a,h){if(Object.prototype.hasOwnProperty.call(a,h))return a[h]};return'      <h3 class="profile__name">'+t.escapeExpression(t.lambda((n=e!=null?c(e,"userData"):e)!=null?c(n,"display_name"):n,e))+`</h3>
      <div class="profile__inputs-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"inputs"):e,{name:"each",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:22,column:8},end:{line:33,column:17}}}))!=null?n:"")+`      </div>
      <div class="profile__btn-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"buttons"):e,{name:"each",hash:{},fn:t.program(4,u,0),inverse:t.noop,data:u,loc:{start:{line:36,column:8},end:{line:43,column:17}}}))!=null?n:"")+`      </div>
`},2:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"          "+((n=(r(i,"Input")||e&&r(e,"Input")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Input",hash:{isEditing:(n=e!=null?r(e,"props"):e)!=null?r(n,"isEditing"):n,inputValue:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputValue"):n,labelClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"labelClass"):n,inputClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputClass"):n,inputMainClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputMainClass"):n,inputType:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputType"):n,inputLabel:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputLabel"):n,inputName:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputName"):n},data:u,loc:{start:{line:23,column:10},end:{line:32,column:13}}}))!=null?n:"")+`
`},4:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"          "+((n=(r(i,"Button")||e&&r(e,"Button")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Button",hash:{onClick:(n=e!=null?r(e,"props"):e)!=null?r(n,"onClick"):n,buttonType:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonType"):n,buttonClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonClass"):n,buttonText:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonText"):n},data:u,loc:{start:{line:37,column:10},end:{line:42,column:13}}}))!=null?n:"")+`
`},6:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Modal")||e&&r(e,"Modal")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Modal",hash:{title:"Загрузите файл"},fn:t.program(7,u,0),inverse:t.noop,data:u,loc:{start:{line:49,column:4},end:{line:68,column:14}}}))!=null?n:""},7:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"profile__form",onSubmit:e!=null?r(e,"onAvatarChange"):e},fn:t.program(8,u,0),inverse:t.noop,data:u,loc:{start:{line:50,column:6},end:{line:67,column:15}}}))!=null?n:""},8:function(t,e,i,f,u){var n,r,c=e??(t.nullContext||{}),a=t.hooks.helperMissing,h=t.lookupProperty||function(p,d){if(Object.prototype.hasOwnProperty.call(p,d))return p[d]};return`        <h1 class="form__title">Загрузите файл</h1>
        <div>
          `+((n=(h(i,"Input")||e&&h(e,"Input")||a).call(c,{name:"Input",hash:{isEditing:"true",inputLabel:"Выбрать файл на компьютере",labelName:"avatar",inputType:"file",inputName:"avatar"},data:u,loc:{start:{line:53,column:10},end:{line:59,column:13}}}))!=null?n:"")+`
          <p class="file">`+t.escapeExpression((r=(r=h(i,"fileName")||(e!=null?h(e,"fileName"):e))!=null?r:a,typeof r=="function"?r.call(c,{name:"fileName",hash:{},data:u,loc:{start:{line:60,column:26},end:{line:60,column:38}}}):r))+`</p>
        </div>
        `+((n=(h(i,"Button")||e&&h(e,"Button")||a).call(c,{name:"Button",hash:{buttonClass:"button_primary",buttonText:"Поменять",buttonType:"submit"},data:u,loc:{start:{line:62,column:8},end:{line:66,column:11}}}))!=null?n:"")+`
`},10:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Modal")||e&&r(e,"Modal")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Modal",hash:{title:"Загрузите файл"},fn:t.program(11,u,0),inverse:t.noop,data:u,loc:{start:{line:72,column:4},end:{line:105,column:14}}}))!=null?n:""},11:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return(n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"profile__form",onSubmit:e!=null?r(e,"saveChanges"):e},fn:t.program(12,u,0),inverse:t.noop,data:u,loc:{start:{line:73,column:6},end:{line:104,column:15}}}))!=null?n:""},12:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`        <h1 class="form__title">Новый пароль</h1>
        <div class="passwords-container">
          `+((n=(a(i,"Input")||e&&a(e,"Input")||c).call(r,{name:"Input",hash:{isEditing:"true",labelClass:"dynamic-input__placeholder",inputClass:"dynamic-input__data",inputMainClass:"dynamic-input",inputValue:"",inputLabel:"Старый пароль",labelName:"oldPassword",inputType:"password",inputName:"oldPassword"},data:u,loc:{start:{line:76,column:10},end:{line:86,column:13}}}))!=null?n:"")+`
          `+((n=(a(i,"Input")||e&&a(e,"Input")||c).call(r,{name:"Input",hash:{isEditing:"true",inputValue:"",labelClass:"dynamic-input__placeholder",inputClass:"dynamic-input__data",inputMainClass:"dynamic-input",inputLabel:"Новый пароль",labelName:"newPassword",inputType:"password",inputName:"newPassword"},data:u,loc:{start:{line:87,column:10},end:{line:97,column:13}}}))!=null?n:"")+`
        </div>
        `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{buttonClass:"button_primary",buttonText:"Сохранить изменения",buttonType:"submit"},data:u,loc:{start:{line:99,column:8},end:{line:103,column:11}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.hooks.helperMissing,a=t.lookupProperty||function(h,p){if(Object.prototype.hasOwnProperty.call(h,p))return h[p]};return`<main class="profile">
  `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{onClick:e!=null?a(e,"onChangePage"):e,imageAlt:"back",buttonImageClass:"profile__btn-back-icon",buttonClass:"profile__btn-back",buttonImage:e!=null?a(e,"arrowBtn"):e,buttonType:"button"},data:u,loc:{start:{line:2,column:2},end:{line:9,column:5}}}))!=null?n:"")+`
  <div class="profile__form-container">
    `+((n=(a(i,"Button")||e&&a(e,"Button")||c).call(r,{name:"Button",hash:{onClick:e!=null?a(e,"onAvatarClick"):e,buttonImage:e!=null?a(e,"avatar"):e,imageAlt:"avatar",buttonImageClass:"profile-avatar",buttonClass:"profile__avatar-btn",buttonType:"button"},data:u,loc:{start:{line:11,column:4},end:{line:18,column:7}}}))!=null?n:"")+`
`+((n=(a(i,"Form")||e&&a(e,"Form")||c).call(r,{name:"Form",hash:{class:"profile__form",onSubmit:e!=null?a(e,"saveChanges"):e},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:19,column:4},end:{line:45,column:13}}}))!=null?n:"")+`  </div>

`+((n=(a(i,"Popup")||e&&a(e,"Popup")||c).call(r,{name:"Popup",hash:{onClick:e!=null?a(e,"onAvatarClick"):e,visibility:e!=null?a(e,"avatarChangeVisibility"):e},fn:t.program(6,u,0),inverse:t.noop,data:u,loc:{start:{line:48,column:2},end:{line:69,column:12}}}))!=null?n:"")+`
`+((n=(a(i,"Popup")||e&&a(e,"Popup")||c).call(r,{name:"Popup",hash:{onClick:e!=null?a(e,"onPasswordToggle"):e,visibility:e!=null?a(e,"passwordChangeVisibility"):e},fn:t.program(10,u,0),inverse:t.noop,data:u,loc:{start:{line:71,column:2},end:{line:106,column:12}}}))!=null?n:"")+`</main>


`},useData:!0}),es="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGJklEQVR4nO1dy29WVRA/AUX/B1/4ihsfi240kc580Jju9c6UkkjcuPARjTFi8FEjqBjjwp1GMG0VQ+qCHRtoZz5RUcNCEXwsMMgWIYrystJrzr1fpBZL7/f1fvc87v0lv4S0KTnn/O6cOY+ZOcY0aNCgQYMGkQJk47WtabqnpQmB0IsgtBOVD6DwIRA6ikKnQPiCZf5v+zM+hMJfgPBH2d8oJ/b/GN4zfI3r/gQHELiqNZMMoPImVN6LSudQOS2Js6B8EIS2gdBQI9BiSMdW4AyvA+EJFD5dogBXpvBpEB5vtUfW2jaYumNNm29A5ddR6HhlIuhi4tBxEHoNZMP1pm5Y005uBqF3Sp6O0pKE+QuVJlvTyR2mJkLsBOW/nQ+8LsnZfFHAq01sGDj46NWo/BQq/+HBQKfdWQyfBeFXolkA2NUMCP3kfGB1eQTlHzPnH/Ly1X5ZIHTR9WBiedYyZ31fcjhZZUJbPYHQ584HUPsmzNfWH5oQADIybHfMzgdN+0sQPtlq8wPGZ2CbNuTLRvcDhtVwFoQeMT4ChJ6Myl9oN36FnzU+AZVedT4w6pZ2AWN8ALZHHnc9GOgPn3EqRkt5tJbTlC5C4TlsJxtdrqbq5MDTIrT3MpWvvrJ9hvKvrjuPvjK/NFtd2blU1Js+LYeg9GUlO3oQett1ZzEQgvCb/RZjKHNcHnQWQ6Dw3KBSqy9iWPNDpR+cd1LDoj3p7svRPQi/5LpzGChB+PlSxWhNj94ESn+67hgGShA+U+rpMCp/7LpTKLTHBiBYovJu5+3pmjRZihggyW0+3IHDvGiQ/PKLdrluU5ecXbd/9JYSBKHtHnQmXRieE6IoIPReCTd/fMF1RzDnbitCyKKA8vllxX1lQWx+fWG7ghdFaGvv4Z0+RBTqQtInC0VJppKVqPxhEIIoHespbDXblXvQAYxRFGHsQRCecN1wjFQUEN7R/TFJlVHoNfMpIPS7PTUvLMig8hrXjcbILWVQk/sKC4LKL7tuMMYvygtdCELiQYPTmEUBpX2Fc/rsBsZ1gzF6n0LnCh3L2+RI943lWlgKCN25tCCakOuGYl1EmaEHI3ToHLIoSzv2Th6464am9RClwB1JbCE+4Lej319kyvrOg4amdbAUEPp2aQtROuZ+ALkeogj/XECQeENEYZHpy90dPZ1YWhB/bgjT6kTJAieqb4vy+UYQuVyQTokPTwVppqzUrykrWqfOU//n1G35DK+depzLXvZPjOLLXv7MgwFMS+x02BtD118N1sAyLn0sPFGnKPcpn8XocHNNjt85BDGKHb+Hf0HFYYhR9ILKXuF6WXpPg3fg/6Xw2cKZVWEGOXAwltHh3kJiBHprOBWYGMUc+iUzT+73oMFpxGLY6fXe7opWNqGkad/EUP5t4UdUwEp43PVXhBFaRsc6tptuYUt/u244RihGxpkEIkrY4aDF6DlhJ7OSJqUt7YMoW0yvyPPCvbnS3R3Mpm9R6+Dza/cl1/UsSMdK3veiMxJDWjS/a5aL1jTfapPe3XdmQ/CFA0orr+GFw5S8tEYnICG40hp2G2HKwtD+5Mam+AwvR4wzpZf8s5Harr8yDJb0nCkbeWYufe++cxwUQfhIVxm33cC+n9GU+OMuxKCLPRUJ6Aao9Jbrrw6DIb1h+o1syRlZqBD2hwf6NlUtRFNIma8shtApWxbRVAlbTrspNc6XiZE/A0tDxgVAaKQpxs/zLIPnWkoPG5dApcc8mK9THwhCTxsfYB8zcT0Y6Jw0ZnwCCD9Ry+lLPHzyaP4DL3Vy9JA58GS98Rl29RVzFhb+SzrhbDXV4z4l2s0jCH8VzMOSdXh6daCqHXg/YN/PiOGZCxA+0veDwqoQ8vPdkF8uxfN893zY8x1bAceHO3os9sD9uPWHJnbY60w7F/uYhwJZ2BNNDur6203dkMd90VYQ/sW5EJrl529ZdtxUFEjHVliHicof2CLD1Uah844s1rbX8M7YkUwlK1szyQAqb7JZRjb1q1S/oHwQhLbZTV0l7wzGhuRwsmrtpyN3g4w8lEe+0KTddILyNyB01D40nx9hZDyZ/cz+LtuYZguIzfZvBzW5qxGgQYMGDRqYiPEP1d7Ogl+XONcAAAAASUVORK5CYII=",Be=(t,e)=>[new B({inputName:"email",inputLabel:"Почта",inputType:"email",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.email,isEditing:e}),new B({inputName:"login",inputLabel:"Логин",inputType:"text",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.login,isEditing:e}),new B({inputName:"first_name",inputLabel:"Имя",inputType:"text",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.first_name,isEditing:e}),new B({inputName:"second_name",inputLabel:"Фамилия",inputType:"text",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.second_name,isEditing:e}),new B({inputName:"display_name",inputLabel:"Имя в чате",inputType:"text",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.display_name,isEditing:e}),new B({inputName:"phone",inputLabel:"Телефон",inputType:"tel",inputMainClass:"line-input",inputClass:"line-input__data",labelClass:"line-input__placeholder",inputValue:t.phone,isEditing:e})],Xe=(t,e)=>[new J({buttonText:"Изменить данные",buttonClass:"button_text button_border",buttonType:"button",onClick:t}),new J({buttonText:"Изменить пароль",buttonClass:"button_text button_border",buttonType:"button",onClick:e}),new J({buttonText:"Выйти",buttonClass:"button_danger button_border",buttonType:"button",onClick:()=>{le.logout()}})],jt=`${Ve}/resources/`;class ts extends O{constructor(){const i=A.getState().user||{};super({currentUserData:i,avatar:i.avatar!==null?`${jt}${i.avatar}`:ee,avatarChangeVisibility:"hidden",passwordChangeVisibility:"hidden",onAvatarChange:f=>this.handleChangeAvatar(f),onAvatarClick:()=>this.handleAvatarClick(),onPasswordToggle:()=>this.handleChangePasswordClick()}),this.props.isEditing=!1,this.props.buttons=Xe(this.toggleEditing.bind(this),this.handleChangePasswordClick.bind(this)),this.props.inputs=Be(i,this.props.isEditing),this.props.union=ee,this.props.arrowBtn=es,this.props.saveChanges=this.saveChanges.bind(this),this.props.onChangePage=f=>{f.preventDefault(),j.go(T.messenger)}}toggleEditing(){this.setProps({isEditing:!this.props.isEditing})}handleChangeAvatar=async e=>{e.preventDefault();const i=e.target,f=i.querySelector('input[name="avatar"]');if(f&&f.files?.length){const u=f.files[0],n=5*1024*1024;if(u.size>n){D("Размер файла слишком велик. Максимальный размер 5 МБ.");return}await Ue.updateUserAvatar(i),this.setProps({avatarChangeVisibility:"hidden"}),location.reload()}else D("Файл для аватара не выбран")};handleAvatarClick=()=>{this.setProps({avatarChangeVisibility:this.props.avatarChangeVisibility==="visible"?"hidden":"visible"})};handleChangePasswordClick=()=>{this.setProps({passwordChangeVisibility:this.props.passwordChangeVisibility==="visible"?"hidden":"visible"})};saveChanges(e){e.preventDefault();const i=e.target;if(ae(i)){if(new FormData(i).get("oldPassword")){Ue.changePassword(i),this.setProps({inputs:Be(this.props.currentUserData,this.props.isEditing)}),this.setProps({buttons:Xe(this.toggleEditing.bind(this),this.handleChangePasswordClick.bind(this))}),this.setProps({passwordChangeVisibility:"hidden"}),this.setProps({avatarChangeVisibility:"hidden"});return}Ue.updateUserInfo(i),this.setProps({inputs:Be(this.props.currentUserData,this.props.isEditing)}),this.setProps({buttons:Xe(this.toggleEditing.bind(this),this.handleChangePasswordClick.bind(this))}),this.setProps({isEditing:!1})}else throw new Error("Form is invalid")}async init(){try{const e=await le.getUser();e&&(A.set("user",e),this.setProps({avatar:e.avatar!==null?`${jt}${e.avatar}`:ee}))}catch{}}render(){const e=this.props.isEditing,i=e?[new J({buttonText:"Сохранить изменения",buttonClass:"button_primary",buttonType:"submit"})]:this.props.buttons,f=Be(this.props.currentUserData||{},e);return this.compile($r,{...this.props,buttons:i,inputs:f,avatarChangeVisibility:this.props.avatarChangeVisibility})}}const ns=t=>({currentUserData:t.user||{}}),rs=Ge(ns)(ts),ss=I.template({1:function(t,e,i,f,u){var n,r=e??(t.nullContext||{}),c=t.lookupProperty||function(a,h){if(Object.prototype.hasOwnProperty.call(a,h))return a[h]};return`    <h1 class="form__title">Вход</h1>
    <div class="form__inputs-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"inputs"):e,{name:"each",hash:{},fn:t.program(2,u,0),inverse:t.noop,data:u,loc:{start:{line:5,column:6},end:{line:15,column:15}}}))!=null?n:"")+`    </div>
    <div class="form__buttons-container">
`+((n=c(i,"each").call(r,e!=null?c(e,"buttons"):e,{name:"each",hash:{},fn:t.program(4,u,0),inverse:t.noop,data:u,loc:{start:{line:18,column:6},end:{line:25,column:15}}}))!=null?n:"")+`    </div>
`},2:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"        "+((n=(r(i,"Input")||e&&r(e,"Input")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Input",hash:{isEditing:(n=e!=null?r(e,"props"):e)!=null?r(n,"isEditing"):n,labelClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"labelClass"):n,inputClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputClass"):n,inputMainClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputMainClass"):n,inputType:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputType"):n,inputLabel:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputLabel"):n,inputName:(n=e!=null?r(e,"props"):e)!=null?r(n,"inputName"):n},data:u,loc:{start:{line:6,column:8},end:{line:14,column:11}}}))!=null?n:"")+`
`},4:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return"        "+((n=(r(i,"Button")||e&&r(e,"Button")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Button",hash:{onClick:(n=e!=null?r(e,"props"):e)!=null?r(n,"onClick"):n,buttonType:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonType"):n,buttonClass:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonClass"):n,buttonText:(n=e!=null?r(e,"props"):e)!=null?r(n,"buttonText"):n},data:u,loc:{start:{line:19,column:8},end:{line:24,column:11}}}))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(t,e,i,f,u){var n,r=t.lookupProperty||function(c,a){if(Object.prototype.hasOwnProperty.call(c,a))return c[a]};return`<main class="page">
`+((n=(r(i,"Form")||e&&r(e,"Form")||t.hooks.helperMissing).call(e??(t.nullContext||{}),{name:"Form",hash:{class:"page__form",onSubmit:e!=null?r(e,"onSubmitForm"):e},fn:t.program(1,u,0),inverse:t.noop,data:u,loc:{start:{line:2,column:2},end:{line:27,column:11}}}))!=null?n:"")+`</main>

`},useData:!0}),is=()=>[new B({inputName:"login",inputLabel:"Логин",inputType:"text",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0}),new B({inputName:"password",inputLabel:"Пароль",inputType:"password",inputMainClass:"dynamic-input",inputClass:"dynamic-input__data",labelClass:"dynamic-input__placeholder",inputValue:"",isEditing:!0})],as=()=>[new J({buttonText:"Авторизоваться",buttonClass:"button_primary",buttonType:"submit"}),new J({buttonText:"Нет аккаунта?",buttonClass:"button_text",buttonType:"button",onClick:t=>{t.preventDefault(),j.go(T.signUp)}})],os=t=>{t.preventDefault();const e=t.target;le.login(e)};class ls extends O{constructor(){super({buttons:as(),inputs:is(),onSubmitForm:e=>os(e)})}componentDidMount(){const e=this.getContent();or(e)}render(){return this.compile(ss,this.props)}}const us=t=>({currentUserData:t.user||{}}),cs=Ge(us)(ls);window.addEventListener("DOMContentLoaded",async()=>{j.use(T.login,cs).use(T.signUp,_r).use(T.messenger,rr).use(T.settings,rs).use(T.error,Xr);try{await le.getUser(),await W.fetchChats()}catch{j.start()}const t=()=>{const f=document.querySelectorAll(".dynamic-input");lr(f)};t(),new MutationObserver(t).observe(document.body,{childList:!0,subtree:!0});const i=document.querySelector(".dialog__input-bar__input");i&&i.addEventListener("input",()=>{i.style.height="auto",i.style.height=`${Math.min(i.scrollHeight,150)}px`}),j.start()});
